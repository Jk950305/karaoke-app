{"version":3,"sources":["vendor/soundtouch.js","components/FilenameLabel.jsx","components/PopularList.jsx","components/Controller.jsx","components/YoutubeList.jsx","components/ErrorAlert.jsx","lib/AudioPlayer.js","components/Karaoke.jsx","App.js","serviceWorker.js","index.js"],"names":["extend","a","b","i","g","__lookupGetter__","s","__lookupSetter__","__defineGetter__","__defineSetter__","testFloatEqual","AbstractFifoSamplePipe","createBuffers","this","inputBuffer","FifoSampleBuffer","outputBuffer","RateTransposer","call","_reset","rate","_vector","Float32Array","_position","_frameCount","FilterSupport","pipe","_pipe","SimpleFilter","sourceSound","historyBufferSize","_sourcePosition","outputBufferPosition","prototype","_inputBuffer","_outputBuffer","clear","_rate","slopeCount","prevSampleL","prevSampleR","clone","result","process","numFrames","frameCount","ensureAdditionalCapacity","numFramesOutput","_transpose","receive","put","src","vector","srcOffset","startIndex","dest","destOffset","endIndex","used","out","srcIndex","rewind","putSamples","samples","position","sourceOffset","length","numSamples","ensureCapacity","set","subarray","putBuffer","buffer","receiveSamples","output","extract","minLength","newVector","fillOutputBuffer","numInputFrames","fillInputBuffer","RangeError","newOutputBufferPosition","sourcePosition","numFramesExtracted","target","Math","min","currentFrames","max","handleSampleData","e","data","_SCAN_OFFSETS","AUTOSEEK_K","Stretch","bQuickSeek","bMidBufferDirty","pMidBuffer","overlapLength","bAutoSeqSetting","bAutoSeekSetting","_tempo","setParameters","SoundTouch","rateTransposer","tdStretch","_intermediateBuffer","tempo","virtualPitch","virtualRate","virtualTempo","_calculateEffectiveRateAndTempo","_clearMidBuffer","aSampleRate","aSequenceMS","aSeekWindowMS","aOverlapMS","sampleRate","overlapMs","sequenceMs","seekWindowMs","calcSeqParameters","calculateOverlapLength","newTempo","intskip","nominalSkip","seekWindowLength","skipFract","floor","sampleReq","seekLength","overlapInMsec","newOvl","pRefMidBuffer","checkLimits","x","mi","ma","seq","seek","AUTOSEQ_AT_MIN","AUTOSEEK_AT_MIN","enable","seekBestOverlapPosition","seekBestOverlapPositionStereoQuick","seekBestOverlapPositionStereo","bestOffs","bestCorr","corr","precalcCorrReferenceStereo","Number","MIN_VALUE","calcCrossCorrStereo","j","scanCount","corrOffset","tempOffset","cnt2","temp","mixingPos","compare","mixingOffset","mixing","overlap","ovlPos","overlapStereo","pInputPos","pInput","fTemp","fScale","fi","pInputOffset","pOutputOffset","pOutput","pOutputPos","ovlSkip","offset","start","rateChange","tempoChange","pitch","pitchOctaves","exp","pitchSemitones","previousTempo","previousRate","module","exports","classNames","require","FilenameLabel","props","undefined","filename","classes","error","push","title","charAt","substring","indexOf","className","PopularList","chartPage","end","en_chart","elem","onClick","findOnYoutube","style","display","float","margin","moveChart","getPopularList","Component","Controller","id","type","handlePitch","disabled","pitch_key","handleTempo","parseFloat","toFixed","handleLatency","latency","YoutubeList","res","yt_list","entries","key","value","message","getMedia","url","thumbnail","alt","time","author","getYoutubeList","ErrorAlert","BUFFER_SIZE","AudioPlayer","emitter","context","AudioContext","scriptProcessor","createScriptProcessor","onaudioprocess","l","getChannelData","r","simpleFilter","framesExtracted","emit","soundTouch","duration","decodeAudioData","ref","createBufferSource","source","t","resume","connect","destination","disconnect","percent","round","EventEmitter","React","Karaoke","getApiKey","fetch","response","json","body","status","Error","api_key","getFiles","createRef","state","action","file","yt_title","yt_url","loading","kr_chart","on","setState","concat","stop","audioPlayer","inputRef","handleSeek","bind","handleTitle","handleURL","loadFile","toggleTJChart","resetChart","then","catch","err","console","log","getTJChart","top100","getSingKingPlaylist","play","current","playbackRate","pause","seekPercent","currentTime","preventDefault","files","replace","paused","prev","fileURL","URL","createObjectURL","reader","FileReader","readAsArrayBuffer","onload","event","setBuffer","getMusic","method","headers","blob","search_title","requestYoutubeSearch","textContent","youtube","axios","create","baseURL","params","part","maxResults","get","q","tmp","items","videoId","youtube2","details","count","str","contentDetails","num","hour","repeat","sec","v","snippet","replaceAll","channelTitle","thumbnails","medium","window","location","reload","btn_id","getPitchValue","val","s_var","parseInt","pow","newPage","playlistId","arr","refreshPage","htmlFor","marginRight","marginBottom","accept","onChange","handleFileChange","onSubmit","searchOnYoutube","autoFocus","placeholder","muted","controls","onTimeUpdate","onPlay","syncMusic","onPause","controlsList","autoPlay","href","download","width","marginLeft","App","Boolean","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.73d48870.chunk.js","sourcesContent":["/*\n* SoundTouch JS audio processing library\n* Copyright (c) Olli Parviainen\n* Copyright (c) Ryan Berdeen\n*\n* This library is free software; you can redistribute it and/or\n* modify it under the terms of the GNU Lesser General Public\n* License as published by the Free Software Foundation; either\n* version 2.1 of the License, or (at your option) any later version.\n*\n* This library is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n* Lesser General License for more details.\n*\n* You should have received a copy of the GNU Lesser General Public\n* License along with this library; if not, write to the Free Software\n* Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n*/\n\nfunction extend(a,b) {\n    for ( var i in b ) {\n        var g = b.__lookupGetter__(i), s = b.__lookupSetter__(i);\n       \n        if ( g || s ) {\n            if ( g )\n                a.__defineGetter__(i, g);\n            if ( s )\n                a.__defineSetter__(i, s);\n         } else\n             a[i] = b[i];\n    }\n    return a;\n}\n\nfunction testFloatEqual(a, b) {\n    return (a > b ? a - b : b - a) > 1e-10;\n}\n/*\n* SoundTouch JS audio processing library\n* Copyright (c) Olli Parviainen\n* Copyright (c) Ryan Berdeen\n*\n* This library is free software; you can redistribute it and/or\n* modify it under the terms of the GNU Lesser General Public\n* License as published by the Free Software Foundation; either\n* version 2.1 of the License, or (at your option) any later version.\n*\n* This library is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n* Lesser General License for more details.\n*\n* You should have received a copy of the GNU Lesser General Public\n* License along with this library; if not, write to the Free Software\n* Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n*/\n\n\nfunction AbstractFifoSamplePipe(createBuffers) {\n    if (createBuffers) {\n        this.inputBuffer = new FifoSampleBuffer();\n        this.outputBuffer = new FifoSampleBuffer();\n    }\n    else {\n        this.inputBuffer = this.outputBuffer = null;\n    }\n}\n        \nAbstractFifoSamplePipe.prototype = {\n    get inputBuffer() {\n        return this._inputBuffer;\n    },\n\n    set inputBuffer (inputBuffer) {\n      this._inputBuffer = inputBuffer;\n    },\n\n    get outputBuffer() {\n        return this._outputBuffer;\n    },\n\n    set outputBuffer(outputBuffer) {\n      this._outputBuffer = outputBuffer;\n    },\n\n    clear: function () {\n        this._inputBuffer.clear();\n        this._outputBuffer.clear();\n    }\n};\n/*\n* SoundTouch JS audio processing library\n* Copyright (c) Olli Parviainen\n* Copyright (c) Ryan Berdeen\n*\n* This library is free software; you can redistribute it and/or\n* modify it under the terms of the GNU Lesser General Public\n* License as published by the Free Software Foundation; either\n* version 2.1 of the License, or (at your option) any later version.\n*\n* This library is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n* Lesser General License for more details.\n*\n* You should have received a copy of the GNU Lesser General Public\n* License along with this library; if not, write to the Free Software\n* Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n*/\n\nfunction RateTransposer(createBuffers) {\n    AbstractFifoSamplePipe.call(this, createBuffers);\n    this._reset();\n    this.rate = 1;\n}\n\nextend(RateTransposer.prototype, AbstractFifoSamplePipe.prototype);\nextend(RateTransposer.prototype, {\n    set rate(rate) {\n        this._rate = rate;\n        // TODO aa filter\n    },\n\n    _reset: function () {\n        this.slopeCount = 0;\n        this.prevSampleL = 0;\n        this.prevSampleR = 0;\n    },\n\n    clone: function () {\n        var result = new RateTransposer();\n        result.rate = this._rate;\n        return result;\n    },\n\n    process: function () {\n        // TODO aa filter\n        var numFrames = this._inputBuffer.frameCount;\n        this._outputBuffer.ensureAdditionalCapacity(numFrames / this._rate + 1);\n        var numFramesOutput = this._transpose(numFrames);\n        this._inputBuffer.receive();\n        this._outputBuffer.put(numFramesOutput);\n    },\n\n    _transpose: function (numFrames) {\n        if (numFrames === 0) {\n            // no work\n            return 0;\n        }\n\n        var src = this._inputBuffer.vector;\n        var srcOffset = this._inputBuffer.startIndex;\n\n        var dest = this._outputBuffer.vector;\n        var destOffset = this._outputBuffer.endIndex;\n\n        var used = 0;\n        var i = 0;\n\n        while(this.slopeCount < 1.0) {\n            dest[destOffset + 2 * i] = (1.0 - this.slopeCount) * this.prevSampleL + this.slopeCount * src[srcOffset];\n            dest[destOffset + 2 * i + 1] = (1.0 - this.slopeCount) * this.prevSampleR + this.slopeCount * src[srcOffset + 1];\n            i++;\n            this.slopeCount += this._rate;\n        }\n\n        this.slopeCount -= 1.0;\n\n        if (numFrames !== 1) {\n            out: while (true) {\n                while (this.slopeCount > 1.0) {\n                    this.slopeCount -= 1.0;\n                    used++;\n                    if (used >= numFrames - 1) {\n                        break out;\n                    }\n                }\n\n                var srcIndex = srcOffset + 2 * used;\n                dest[destOffset + 2 * i] = (1.0 - this.slopeCount) * src[srcIndex] + this.slopeCount * src[srcIndex + 2];\n                dest[destOffset + 2 * i + 1] = (1.0 - this.slopeCount) * src[srcIndex + 1] + this.slopeCount * src[srcIndex + 3];\n\n                i++;\n                this.slopeCount += this._rate;\n            }\n        }\n\n        this.prevSampleL = src[srcOffset + 2 * numFrames - 2];\n        this.prevSampleR = src[srcOffset + 2 * numFrames - 1];\n\n        return i;\n    }\n});\n/*\n* SoundTouch JS audio processing library\n* Copyright (c) Olli Parviainen\n* Copyright (c) Ryan Berdeen\n*\n* This library is free software; you can redistribute it and/or\n* modify it under the terms of the GNU Lesser General Public\n* License as published by the Free Software Foundation; either\n* version 2.1 of the License, or (at your option) any later version.\n*\n* This library is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n* Lesser General License for more details.\n*\n* You should have received a copy of the GNU Lesser General Public\n* License along with this library; if not, write to the Free Software\n* Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n*/\n\nfunction FifoSampleBuffer() {\n    this._vector = new Float32Array();\n    this._position = 0;\n    this._frameCount = 0;\n}\n\nFifoSampleBuffer.prototype = {\n    get vector() {\n        return this._vector;\n    },\n\n    get position() {\n        return this._position;\n    },\n\n    get startIndex() {\n        return this._position * 2;\n    },\n\n    get frameCount() {\n        return this._frameCount;\n    },\n\n    get endIndex() {\n        return (this._position + this._frameCount) * 2;\n    },\n\n    clear: function() {\n        this.receive(this._frameCount);\n        this.rewind();\n    },\n\n    put: function (numFrames) {\n        this._frameCount += numFrames;\n    },\n\n    putSamples: function (samples, position, numFrames) {\n        position = position || 0;\n        var sourceOffset = position * 2;\n        if (!(numFrames >= 0)) {\n            numFrames = (samples.length - sourceOffset) / 2;\n        }\n        var numSamples = numFrames * 2;\n\n        this.ensureCapacity(numFrames + this._frameCount);\n\n        var destOffset = this.endIndex;\n        this._vector.set(samples.subarray(sourceOffset, sourceOffset + numSamples), destOffset);\n\n        this._frameCount += numFrames;\n    },\n\n    putBuffer: function (buffer, position, numFrames) {\n        position = position || 0;\n        if (!(numFrames >= 0)) {\n            numFrames = buffer.frameCount - position;\n        }\n        this.putSamples(buffer.vector, buffer.position + position, numFrames);\n    },\n\n    receive: function (numFrames) {\n        if (!(numFrames >= 0) || numFrames > this._frameCount) {\n            numFrames = this._frameCount\n        }\n        this._frameCount -= numFrames;\n        this._position += numFrames;\n    },\n\n    receiveSamples: function (output, numFrames) {\n        var numSamples = numFrames * 2;\n        var sourceOffset = this.startIndex;\n        output.set(this._vector.subarray(sourceOffset, sourceOffset + numSamples));\n        this.receive(numFrames);\n    },\n\n    extract: function (output, position, numFrames) {\n        var sourceOffset = this.startIndex + position * 2;\n        var numSamples = numFrames * 2;\n        output.set(this._vector.subarray(sourceOffset, sourceOffset + numSamples));\n    },\n\n    ensureCapacity: function (numFrames) {\n        var minLength = numFrames * 2;\n        if (this._vector.length < minLength) {\n            var newVector = new Float32Array(minLength);\n            newVector.set(this._vector.subarray(this.startIndex, this.endIndex));\n            this._vector = newVector;\n            this._position = 0;\n        }\n        else {\n            this.rewind();\n        }\n    },\n\n    ensureAdditionalCapacity: function (numFrames) {\n        this.ensureCapacity(this.frameCount + numFrames);\n    },\n\n    rewind: function () {\n        if (this._position > 0) {\n            this._vector.set(this._vector.subarray(this.startIndex, this.endIndex));\n            this._position = 0;\n        }\n    }\n};\n/*\n* SoundTouch JS audio processing library\n* Copyright (c) Olli Parviainen\n* Copyright (c) Ryan Berdeen\n*\n* This library is free software; you can redistribute it and/or\n* modify it under the terms of the GNU Lesser General Public\n* License as published by the Free Software Foundation; either\n* version 2.1 of the License, or (at your option) any later version.\n*\n* This library is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n* Lesser General License for more details.\n*\n* You should have received a copy of the GNU Lesser General Public\n* License along with this library; if not, write to the Free Software\n* Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n*/\n\nfunction FilterSupport(pipe) {\n    this._pipe = pipe;\n}\n\nFilterSupport.prototype = {\n    get pipe() {\n        return this._pipe;\n    },\n\n    get inputBuffer() {\n        return this._pipe.inputBuffer;\n    },\n\n    get outputBuffer() {\n        return this._pipe.outputBuffer;\n    },\n\n    // fillInputBuffer: function(numFrames) {\n    //     throw new Error(\"fillInputBuffer() not overridden\");\n    // },\n\n    fillOutputBuffer: function(numFrames) {\n        while (this.outputBuffer.frameCount < numFrames) {\n            // TODO hardcoded buffer size\n            var numInputFrames = (8192 * 2) - this.inputBuffer.frameCount;\n\n            this.fillInputBuffer(numInputFrames);\n\n            if (this.inputBuffer.frameCount < (8192 * 2)) {\n                break;\n                // TODO flush pipe\n            }\n            this._pipe.process();\n        }\n    },\n\n    clear: function() {\n        this._pipe.clear();\n    }\n};\n\nfunction SimpleFilter(sourceSound, pipe) {\n    FilterSupport.call(this, pipe);\n    this.sourceSound = sourceSound;\n    this.historyBufferSize = 22050;\n    this._sourcePosition = 0;\n    this.outputBufferPosition = 0;\n    this._position = 0;\n}\n\nextend(SimpleFilter.prototype, FilterSupport.prototype);\n\nextend(SimpleFilter.prototype, {\n    get position() {\n        return this._position;\n    },\n\n    set position(position) {\n        if (position > this._position) {\n            throw new RangeError('New position may not be greater than current position');\n        }\n        var newOutputBufferPosition = this.outputBufferPosition - (this._position - position);\n        if (newOutputBufferPosition < 0) {\n            throw new RangeError('New position falls outside of history buffer');\n        }\n        this.outputBufferPosition = newOutputBufferPosition;\n        this._position = position;\n    },\n\n    get sourcePosition() {\n        return this._sourcePosition;\n    },\n\n    set sourcePosition(sourcePosition) {\n        this.clear();\n        this._sourcePosition = sourcePosition;\n    },\n\n    fillInputBuffer: function(numFrames) {\n        var samples = new Float32Array(numFrames * 2);\n        var numFramesExtracted = this.sourceSound.extract(samples, numFrames, this._sourcePosition);\n        this._sourcePosition += numFramesExtracted;\n        this.inputBuffer.putSamples(samples, 0, numFramesExtracted);\n    },\n\n    extract: function(target, numFrames) {\n        this.fillOutputBuffer(this.outputBufferPosition + numFrames);\n\n        var numFramesExtracted = Math.min(numFrames, this.outputBuffer.frameCount - this.outputBufferPosition);\n        this.outputBuffer.extract(target, this.outputBufferPosition, numFramesExtracted);\n\n        var currentFrames = this.outputBufferPosition + numFramesExtracted;\n        this.outputBufferPosition = Math.min(this.historyBufferSize, currentFrames);\n        this.outputBuffer.receive(Math.max(currentFrames - this.historyBufferSize, 0));\n\n        this._position += numFramesExtracted;\n        return numFramesExtracted;\n    },\n\n    handleSampleData: function(e) {\n        this.extract(e.data, 4096);\n    },\n\n    clear: function() {\n        // TODO yuck\n        FilterSupport.prototype.clear.call(this);\n        this.outputBufferPosition = 0;\n    }\n});\n/*\n* SoundTouch JS audio processing library\n* Copyright (c) Olli Parviainen\n* Copyright (c) Ryan Berdeen\n*\n* This library is free software; you can redistribute it and/or\n* modify it under the terms of the GNU Lesser General Public\n* License as published by the Free Software Foundation; either\n* version 2.1 of the License, or (at your option) any later version.\n*\n* This library is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n* Lesser General License for more details.\n*\n* You should have received a copy of the GNU Lesser General Public\n* License along with this library; if not, write to the Free Software\n* Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n*/\n\n//'use strict';\n\n/**\n* Giving this value for the sequence length sets automatic parameter value\n* according to tempo setting (recommended)\n*/\nvar USE_AUTO_SEQUENCE_LEN = 0;\n\n/**\n* Default length of a single processing sequence, in milliseconds. This determines to how\n* long sequences the original sound is chopped in the time-stretch algorithm.\n*\n* The larger this value is, the lesser sequences are used in processing. In principle\n* a bigger value sounds better when slowing down tempo, but worse when increasing tempo\n* and vice versa.\n*\n* Increasing this value reduces computational burden and vice versa.\n*/\n//var DEFAULT_SEQUENCE_MS = 130\nvar DEFAULT_SEQUENCE_MS = USE_AUTO_SEQUENCE_LEN;\n\n/**\n* Giving this value for the seek window length sets automatic parameter value\n* according to tempo setting (recommended)\n*/\nvar USE_AUTO_SEEKWINDOW_LEN = 0;\n\n/**\n* Seeking window default length in milliseconds for algorithm that finds the best possible\n* overlapping location. This determines from how wide window the algorithm may look for an\n* optimal joining location when mixing the sound sequences back together.\n*\n* The bigger this window setting is, the higher the possibility to find a better mixing\n* position will become, but at the same time large values may cause a \"drifting\" artifact\n* because consequent sequences will be taken at more uneven intervals.\n*\n* If there's a disturbing artifact that sounds as if a constant frequency was drifting\n* around, try reducing this setting.\n*\n* Increasing this value increases computational burden and vice versa.\n*/\n//var DEFAULT_SEEKWINDOW_MS = 25;\nvar DEFAULT_SEEKWINDOW_MS = USE_AUTO_SEEKWINDOW_LEN;\n\n/**\n* Overlap length in milliseconds. When the chopped sound sequences are mixed back together,\n* to form a continuous sound stream, this parameter defines over how long period the two\n* consecutive sequences are let to overlap each other.\n*\n* This shouldn't be that critical parameter. If you reduce the DEFAULT_SEQUENCE_MS setting\n* by a large amount, you might wish to try a smaller value on this.\n*\n* Increasing this value increases computational burden and vice versa.\n*/\nvar DEFAULT_OVERLAP_MS = 8;\n\n// Table for the hierarchical mixing position seeking algorithm\nvar _SCAN_OFFSETS = [\n    [ 124,  186,  248,  310,  372,  434,  496,  558,  620,  682,  744, 806,\n      868,  930,  992, 1054, 1116, 1178, 1240, 1302, 1364, 1426, 1488,   0],\n    [-100,  -75,  -50,  -25,   25,   50,   75,  100,    0,    0,    0,   0,\n        0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,   0],\n    [ -20,  -15,  -10,   -5,    5,   10,   15,   20,    0,    0,    0,   0,\n        0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,   0],\n    [  -4,   -3,   -2,   -1,    1,    2,    3,    4,    0,    0,    0,   0,\n        0,    0,    0,    0,    0,    0,    0,    0,    0,    0,    0,   0]];\n\n// Adjust tempo param according to tempo, so that variating processing sequence length is used\n// at varius tempo settings, between the given low...top limits\nvar AUTOSEQ_TEMPO_LOW = 0.5;     // auto setting low tempo range (-50%)\nvar AUTOSEQ_TEMPO_TOP = 2.0;     // auto setting top tempo range (+100%)\n\n// sequence-ms setting values at above low & top tempo\nvar AUTOSEQ_AT_MIN = 125.0;\nvar AUTOSEQ_AT_MAX = 50.0;\nvar AUTOSEQ_K = ((AUTOSEQ_AT_MAX - AUTOSEQ_AT_MIN) / (AUTOSEQ_TEMPO_TOP - AUTOSEQ_TEMPO_LOW));\nvar AUTOSEQ_C = (AUTOSEQ_AT_MIN - (AUTOSEQ_K) * (AUTOSEQ_TEMPO_LOW));\n\n// seek-window-ms setting values at above low & top tempo\nvar AUTOSEEK_AT_MIN = 25.0;\nvar AUTOSEEK_AT_MAX = 15.0;\nvar AUTOSEEK_K = ((AUTOSEEK_AT_MAX - AUTOSEEK_AT_MIN) / (AUTOSEQ_TEMPO_TOP - AUTOSEQ_TEMPO_LOW));\nvar AUTOSEEK_C = (AUTOSEEK_AT_MIN - (AUTOSEEK_K) * (AUTOSEQ_TEMPO_LOW));\n\nfunction Stretch(createBuffers) {\n    AbstractFifoSamplePipe.call(this, createBuffers);\n    this.bQuickSeek = true;\n    this.bMidBufferDirty = false;\n\n    this.pMidBuffer = null;\n    this.overlapLength = 0;\n\n    this.bAutoSeqSetting = true;\n    this.bAutoSeekSetting = true;\n\n    this._tempo = 1;\n    this.setParameters(44100, DEFAULT_SEQUENCE_MS, DEFAULT_SEEKWINDOW_MS, DEFAULT_OVERLAP_MS);\n}\n\nextend(Stretch.prototype, AbstractFifoSamplePipe.prototype);\n\nextend(Stretch.prototype, {\n    clear: function () {\n        AbstractFifoSamplePipe.prototype.clear.call(this);\n        this._clearMidBuffer();\n    },\n\n    _clearMidBuffer: function () {\n        if (this.bMidBufferDirty) {\n            this.bMidBufferDirty = false;\n            this.pMidBuffer = null;\n        }\n    },\n\n    /**\n    * Sets routine control parameters. These control are certain time constants\n    * defining how the sound is stretched to the desired duration.\n    *\n    * 'sampleRate' = sample rate of the sound\n    * 'sequenceMS' = one processing sequence length in milliseconds (default = 82 ms)\n    * 'seekwindowMS' = seeking window length for scanning the best overlapping\n    *      position (default = 28 ms)\n    * 'overlapMS' = overlapping length (default = 12 ms)\n    */\n    setParameters: function(aSampleRate, aSequenceMS, aSeekWindowMS, aOverlapMS) {\n        // accept only positive parameter values - if zero or negative, use old values instead\n        if (aSampleRate > 0) {\n            this.sampleRate = aSampleRate;\n        }\n        if (aOverlapMS > 0) {\n            this.overlapMs = aOverlapMS;\n        }\n\n        if (aSequenceMS > 0) {\n            this.sequenceMs = aSequenceMS;\n            this.bAutoSeqSetting = false;\n        } else {\n            // zero or below, use automatic setting\n            this.bAutoSeqSetting = true;\n        }\n\n        if (aSeekWindowMS > 0) {\n            this.seekWindowMs = aSeekWindowMS;\n            this.bAutoSeekSetting = false;\n        } else {\n            // zero or below, use automatic setting\n            this.bAutoSeekSetting = true;\n        }\n\n        this.calcSeqParameters();\n\n        this.calculateOverlapLength(this.overlapMs);\n\n        // set tempo to recalculate 'sampleReq'\n        this.tempo = this._tempo;\n    },\n\n    /**\n    * Sets new target tempo. Normal tempo = 'SCALE', smaller values represent slower\n    * tempo, larger faster tempo.\n    */\n    set tempo(newTempo) {\n        var intskip;\n\n        this._tempo = newTempo;\n\n        // Calculate new sequence duration\n        this.calcSeqParameters();\n\n        // Calculate ideal skip length (according to tempo value)\n        this.nominalSkip = this._tempo * (this.seekWindowLength - this.overlapLength);\n        this.skipFract = 0;\n        intskip = Math.floor(this.nominalSkip + 0.5);\n\n        // Calculate how many samples are needed in the 'inputBuffer' to\n        // process another batch of samples\n        this.sampleReq = Math.max(intskip + this.overlapLength, this.seekWindowLength) + this.seekLength;\n    },\n\n\n    // get tempo() {\n    //   return this._tempo;\n    // },\n\n    get inputChunkSize() {\n        return this.sampleReq;\n    },\n\n    get outputChunkSize() {\n        return this.overlapLength + Math.max(0, this.seekWindowLength - 2 * this.overlapLength);\n    },\n\n    /**\n    * Calculates overlapInMsec period length in samples.\n    */\n    calculateOverlapLength: function (overlapInMsec) {\n        var newOvl;\n\n        // TODO assert(overlapInMsec >= 0);\n        newOvl = (this.sampleRate * overlapInMsec) / 1000;\n        if (newOvl < 16) newOvl = 16;\n\n        // must be divisible by 8\n        newOvl -= newOvl % 8;\n\n        this.overlapLength = newOvl;\n\n        this.pRefMidBuffer = new Float32Array(this.overlapLength * 2);\n        this.pMidBuffer = new Float32Array(this.overlapLength * 2);\n    },\n\n    checkLimits: function (x, mi, ma) {\n        return (x < mi) ? mi : ((x > ma) ? ma : x);\n    },\n\n    /**\n    * Calculates processing sequence length according to tempo setting\n    */\n    calcSeqParameters: function() {\n        var seq;\n        var seek;\n\n        if (this.bAutoSeqSetting) {\n            seq = AUTOSEQ_C + AUTOSEQ_K * this._tempo;\n            seq = this.checkLimits(seq, AUTOSEQ_AT_MAX, AUTOSEQ_AT_MIN);\n            this.sequenceMs = Math.floor(seq + 0.5);\n        }\n\n        if (this.bAutoSeekSetting) {\n            seek = AUTOSEEK_C + AUTOSEEK_K * this._tempo;\n            seek = this.checkLimits(seek, AUTOSEEK_AT_MAX, AUTOSEEK_AT_MIN);\n            this.seekWindowMs = Math.floor(seek + 0.5);\n        }\n\n        // Update seek window lengths\n        this.seekWindowLength = Math.floor((this.sampleRate * this.sequenceMs) / 1000);\n        this.seekLength = Math.floor((this.sampleRate * this.seekWindowMs) / 1000);\n    },\n\n\n    /**\n    * Enables/disables the quick position seeking algorithm.\n    */\n    set quickSeek(enable) {\n        this.bQuickSeek = enable;\n    },\n\n    clone: function () {\n        var result = new Stretch();\n        result.tempo = this.tempo;\n        result.setParameters(this.sampleRate, this.sequenceMs, this.seekWindowMs, this.overlapMs);\n        return result;\n    },\n\n    /**\n    * Seeks for the optimal overlap-mixing position.\n    */\n    seekBestOverlapPosition: function () {\n      if (this.bQuickSeek) {\n          return this.seekBestOverlapPositionStereoQuick();\n      }\n      else {\n          return this.seekBestOverlapPositionStereo();\n      }\n    },\n\n    /**\n    * Seeks for the optimal overlap-mixing position. The 'stereo' version of the\n    * routine\n    *\n    * The best position is determined as the position where the two overlapped\n    * sample sequences are 'most alike', in terms of the highest cross-correlation\n    * value over the overlapping period\n    */\n    seekBestOverlapPositionStereo: function () {\n        var bestOffs;\n        var bestCorr\n        var corr;\n        var i;\n\n        // Slopes the amplitudes of the 'midBuffer' samples\n        this.precalcCorrReferenceStereo();\n\n        bestCorr = Number.MIN_VALUE;\n        bestOffs = 0;\n\n        // Scans for the best correlation value by testing each possible position\n        // over the permitted range.\n        for (i = 0; i < this.seekLength; i ++) {\n            // Calculates correlation value for the mixing position corresponding\n            // to 'i'\n            corr = this.calcCrossCorrStereo(2 * i, this.pRefMidBuffer);\n\n            // Checks for the highest correlation value\n            if (corr > bestCorr) {\n                bestCorr = corr;\n                bestOffs = i;\n            }\n        }\n\n        return bestOffs;\n    },\n\n    /**\n    * Seeks for the optimal overlap-mixing position. The 'stereo' version of the\n    * routine\n    *\n    * The best position is determined as the position where the two overlapped\n    * sample sequences are 'most alike', in terms of the highest cross-correlation\n    * value over the overlapping period\n    */\n    seekBestOverlapPositionStereoQuick: function () {\n        var j;\n        var bestOffs;\n        var bestCorr;\n        var corr;\n        var scanCount;\n        var corrOffset;\n        var tempOffset;\n\n        // Slopes the amplitude of the 'midBuffer' samples\n        this.precalcCorrReferenceStereo();\n\n        bestCorr = Number.MIN_VALUE;\n        bestOffs = 0;\n        corrOffset = 0;\n        tempOffset = 0;\n\n        // Scans for the best correlation value using four-pass hierarchical search.\n        //\n        // The look-up table 'scans' has hierarchical position adjusting steps.\n        // In first pass the routine searhes for the highest correlation with\n        // relatively coarse steps, then rescans the neighbourhood of the highest\n        // correlation with better resolution and so on.\n        for (scanCount = 0; scanCount < 4; scanCount ++) {\n            j = 0;\n            while (_SCAN_OFFSETS[scanCount][j]) {\n                tempOffset = corrOffset + _SCAN_OFFSETS[scanCount][j];\n                if (tempOffset >= this.seekLength) break;\n\n                // Calculates correlation value for the mixing position corresponding\n                // to 'tempOffset'\n                corr = this.calcCrossCorrStereo(2 * tempOffset, this.pRefMidBuffer);\n\n                // Checks for the highest correlation value\n                if (corr > bestCorr) {\n                    bestCorr = corr;\n                    bestOffs = tempOffset;\n                }\n                j++;\n            }\n            corrOffset = bestOffs;\n        }\n\n        return bestOffs;\n    },\n\n    /**\n    * Slopes the amplitude of the 'midBuffer' samples so that cross correlation\n    * is faster to calculate\n    */\n    precalcCorrReferenceStereo: function() {\n        var i;\n        var cnt2;\n        var temp;\n\n        for (i = 0; i < this.overlapLength; i ++) {\n            temp = i * (this.overlapLength - i);\n            cnt2 = i * 2;\n            this.pRefMidBuffer[cnt2] = this.pMidBuffer[cnt2] * temp;\n            this.pRefMidBuffer[cnt2 + 1] = this.pMidBuffer[cnt2 + 1] * temp;\n        }\n    },\n\n    calcCrossCorrStereo: function(mixingPos, compare) {\n        var mixing = this._inputBuffer.vector;\n        mixingPos += this._inputBuffer.startIndex;\n\n        var corr;\n        var i;\n        var mixingOffset;\n\n        corr = 0;\n        for (i = 2; i < 2 * this.overlapLength; i += 2) {\n            mixingOffset = i + mixingPos;\n            corr += mixing[mixingOffset] * compare[i] +\n            mixing[mixingOffset + 1] * compare[i + 1];\n        }\n\n        return corr;\n    },\n\n    // TODO inline\n    /**\n    * Overlaps samples in 'midBuffer' with the samples in 'pInputBuffer' at position\n    * of 'ovlPos'.\n    */\n    overlap: function (ovlPos) {\n        this.overlapStereo(2 * ovlPos);\n    },\n\n    /**\n    * Overlaps samples in 'midBuffer' with the samples in 'pInput'\n    */\n    overlapStereo: function(pInputPos) {\n        var pInput = this._inputBuffer.vector;\n        pInputPos += this._inputBuffer.startIndex;\n\n        var pOutput = this._outputBuffer.vector;\n        var pOutputPos = this._outputBuffer.endIndex;\n\n        var i;\n        var cnt2;\n        var fTemp;\n        var fScale;\n        var fi;\n        var pInputOffset;\n        var pOutputOffset;\n\n        fScale = 1 / this.overlapLength;\n\n        for (i = 0; i < this.overlapLength; i++) {\n            fTemp = (this.overlapLength - i) * fScale;\n            fi = i * fScale;\n            cnt2 = 2 * i;\n            pInputOffset = cnt2 + pInputPos;\n            pOutputOffset = cnt2 + pOutputPos;\n            pOutput[pOutputOffset + 0] = pInput[pInputOffset + 0] * fi + this.pMidBuffer[cnt2 + 0] * fTemp;\n            pOutput[pOutputOffset + 1] = pInput[pInputOffset + 1] * fi + this.pMidBuffer[cnt2 + 1] * fTemp;\n        }\n    },\n\n    process: function() {\n        var ovlSkip;\n        var offset;\n        var temp;\n\n        if (this.pMidBuffer == null) {\n            // if midBuffer is empty, move the first samples of the input stream\n            // into it\n            if (this._inputBuffer.frameCount < this.overlapLength) {\n                // wait until we've got overlapLength samples\n                return;\n            }\n            this.pMidBuffer = new Float32Array(this.overlapLength * 2);\n            this._inputBuffer.receiveSamples(this.pMidBuffer, this.overlapLength);\n        }\n\n        // Process samples as long as there are enough samples in 'inputBuffer'\n        // to form a processing frame.\n        while (this._inputBuffer.frameCount >= this.sampleReq) {\n            // If tempo differs from the normal ('SCALE'), scan for the best overlapping\n            // position\n            offset = this.seekBestOverlapPosition();\n\n            // Mix the samples in the 'inputBuffer' at position of 'offset' with the\n            // samples in 'midBuffer' using sliding overlapping\n            // ... first partially overlap with the end of the previous sequence\n            // (that's in 'midBuffer')\n            this._outputBuffer.ensureAdditionalCapacity(this.overlapLength);\n            // FIXME unit?\n            //overlap(uint(offset));\n            this.overlap(Math.floor(offset));\n            this._outputBuffer.put(this.overlapLength);\n\n            // ... then copy sequence samples from 'inputBuffer' to output\n            temp = (this.seekWindowLength - 2 * this.overlapLength); // & 0xfffffffe;\n            if (temp > 0) {\n                this._outputBuffer.putBuffer(this._inputBuffer, offset + this.overlapLength, temp);\n            }\n\n            // Copies the end of the current sequence from 'inputBuffer' to\n            // 'midBuffer' for being mixed with the beginning of the next\n            // processing sequence and so on\n            //assert(offset + seekWindowLength <= (int)inputBuffer.numSamples());\n            var start = this.inputBuffer.startIndex + 2 * (offset + this.seekWindowLength - this.overlapLength);\n            this.pMidBuffer.set(this._inputBuffer.vector.subarray(start, start + 2 * this.overlapLength))\n\n            // Remove the processed samples from the input buffer. Update\n            // the difference between integer & nominal skip step to 'skipFract'\n            // in order to prevent the error from accumulating over time.\n            this.skipFract += this.nominalSkip;   // real skip size\n            ovlSkip = Math.floor(this.skipFract); // rounded to integer skip\n            this.skipFract -= ovlSkip;            // maintain the fraction part, i.e. real vs. integer skip\n            this._inputBuffer.receive(ovlSkip);\n        }\n    }\n});\n\n// https://bugs.webkit.org/show_bug.cgi?id=57295\nextend(Stretch.prototype, {\n    get tempo() {\n      return this._tempo;\n    }\n});\n/*\n* SoundTouch JS audio processing library\n* Copyright (c) Olli Parviainen\n* Copyright (c) Ryan Berdeen\n*\n* This library is free software; you can redistribute it and/or\n* modify it under the terms of the GNU Lesser General Public\n* License as published by the Free Software Foundation; either\n* version 2.1 of the License, or (at your option) any later version.\n*\n* This library is distributed in the hope that it will be useful,\n* but WITHOUT ANY WARRANTY; without even the implied warranty of\n* MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the GNU\n* Lesser General Public License for more details.\n*\n* You should have received a copy of the GNU Lesser General Public\n* License along with this library; if not, write to the Free Software\n* Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA\n*/\n\nfunction SoundTouch() {\n    this.rateTransposer = new RateTransposer(false);\n    this.tdStretch = new Stretch(false);\n\n    this._inputBuffer = new FifoSampleBuffer();\n    this._intermediateBuffer = new FifoSampleBuffer();\n    this._outputBuffer = new FifoSampleBuffer();\n\n    this._rate = 0;\n    this.tempo = 0;\n\n    this.virtualPitch = 1.0;\n    this.virtualRate = 1.0;\n    this.virtualTempo = 1.0;\n\n    this._calculateEffectiveRateAndTempo();\n}\n\nextend(SoundTouch.prototype, {\n    clear: function () {\n        this.rateTransposer.clear();\n        this.tdStretch.clear();\n    },\n\n    clone: function () {\n        var result = new SoundTouch();\n        result.rate = this.rate;\n        result.tempo = this.tempo;\n        return result;\n    },\n\n    get rate() {\n        return this._rate;\n    },\n\n    set rate(rate) {\n        this.virtualRate = rate;\n        this._calculateEffectiveRateAndTempo();\n    },\n\n    set rateChange(rateChange) {\n        this.rate = 1.0 + 0.01 * rateChange;\n    },\n\n    get tempo() {\n        return this._tempo;\n    },\n\n    set tempo(tempo) {\n        this.virtualTempo = tempo;\n        this._calculateEffectiveRateAndTempo();\n    },\n\n    set tempoChange(tempoChange) {\n        this.tempo = 1.0 + 0.01 * tempoChange;\n    },\n\n    set pitch(pitch) {\n        this.virtualPitch = pitch;\n        this._calculateEffectiveRateAndTempo();\n    },\n\n    set pitchOctaves(pitchOctaves) {\n        this.pitch = Math.exp(0.69314718056 * pitchOctaves);\n        this._calculateEffectiveRateAndTempo();\n    },\n\n    set pitchSemitones(pitchSemitones) {\n        this.pitchOctaves = pitchSemitones / 12.0;\n    },\n\n    get inputBuffer() {\n        return this._inputBuffer;\n    },\n\n    get outputBuffer() {\n        return this._outputBuffer;\n    },\n\n    _calculateEffectiveRateAndTempo: function () {\n        var previousTempo = this._tempo;\n        var previousRate = this._rate;\n\n        this._tempo = this.virtualTempo / this.virtualPitch;\n        this._rate = this.virtualRate * this.virtualPitch;\n\n        if (testFloatEqual(this._tempo, previousTempo)) {\n            this.tdStretch.tempo = this._tempo;\n        }\n        if (testFloatEqual(this._rate, previousRate)) {\n            this.rateTransposer.rate = this._rate;\n        }\n\n        if (this._rate > 1.0) {\n            if (this._outputBuffer !== this.rateTransposer.outputBuffer) {\n                this.tdStretch.inputBuffer = this._inputBuffer;\n                this.tdStretch.outputBuffer = this._intermediateBuffer;\n\n                this.rateTransposer.inputBuffer = this._intermediateBuffer;\n                this.rateTransposer.outputBuffer = this._outputBuffer;\n            }\n        }\n        else {\n            if (this._outputBuffer !== this.tdStretch.outputBuffer) {\n                this.rateTransposer.inputBuffer = this._inputBuffer;\n                this.rateTransposer.outputBuffer = this._intermediateBuffer;\n\n                this.tdStretch.inputBuffer = this._intermediateBuffer;\n                this.tdStretch.outputBuffer = this._outputBuffer;\n            }\n        }\n    },\n\n    process: function () {\n        if (this._rate > 1.0) {\n            this.tdStretch.process();\n            this.rateTransposer.process();\n        }\n        else {\n            this.rateTransposer.process();\n            this.tdStretch.process();\n        }\n    }\n});\n\n// This is the only part that was added for screw (plus fixing a couple typos where `this` was\n// erroneously not used)\nmodule.exports = {SimpleFilter, SoundTouch};\n","const classNames = require('classnames');\nconst React = require('react');\n\nconst FilenameLabel = props => {\n    if (props.filename === undefined || props.filename === \"\") {\n        return null;\n    }\n\n    const classes = ['alert', 'filename-label'];\n    if (props.error === undefined) {\n        classes.push('alert-info');\n    } else {\n        classes.push('alert-danger');\n    }\n\n    var title = props.filename;\n    title = (title.charAt(title.length-4) === \".\")?(title.substring(0, title.indexOf('.'))):(title);\n    return <span className={classNames(classes)}>{title}</span>;\n};\n\n\nexport default FilenameLabel;\n","const React = require('react');\n\nclass PopularList extends React.Component {\n    \n    getPopularList(){\n        var result = [];\n        var start = (this.props.chartPage-1)*10;\n        var end = start+10;\n        if(this.props.chartPage>0 && this.props.chartPage<=(this.props.en_chart.length/10)){\n            for(var i=start; i<end; i++){\n                var elem = this.props.en_chart[i];\n                if(elem){\n                    var title = elem.title;\n                    result.push(<tr key={i}><td onClick={e=>this.props.findOnYoutube(e)}>{title}</td></tr>);\n                }\n            }\n        }\n        return result;\n    }\n\n    render() {\n        return (\n            <div style={{display: (this.props.chartPage>0)?('block'):('none')}}>     \n                <p className=\"cursor\" style={{float: 'left', margin:'2%', display: (this.props.chartPage>1)?( 'block' ):( 'none' )}} onClick={e=>this.props.moveChart(e)}>\n                    prev\n                </p>\n                \n                <p className=\"cursor\" style={{float: 'right', margin:'2%', display: (this.props.chartPage<(this.props.en_chart.length/10) )?( 'block' ):( 'none' )}} onClick={e=>this.props.moveChart(e)}>\n                    next\n                </p>\n\n                <table className=\" table table-hover\">\n                    <tbody>\n                        {this.getPopularList()}\n                    </tbody>\n                </table>\n                \n            </div>\n        );\n    }\n};\n\n\nexport default PopularList;\n","const React = require('react');\n\nclass Controller extends React.Component {\n    render() {\n        return (\n            <div className=\"container\">\n                <div className=\"row\">\n                    <div className=\"col-sm\">\n                        <button id=\"decreasePitch\" type=\"button\" onClick={e => this.props.handlePitch(e)} className=\"btn btns btn-secondary\" disabled={(this.props.pitch_key===-12)}> - </button>\n                    </div>\n                    <div className=\"col-sm tagg\">\n                        <p> \n                            Pitch ({ (this.props.pitch_key<0)?(this.props.pitch_key):(\"+\"+this.props.pitch_key) } key) \n                        </p>\n                    </div>\n                    <div className=\"col-sm\">\n                        <button id=\"increasePitch\" type=\"button\" onClick={e => this.props.handlePitch(e)} className=\"btn btns btn-secondary\" disabled={(this.props.pitch_key===12)}> + </button>\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col-sm\">\n                        <button id=\"decreaseTempo\" type=\"button\" onClick={e => this.props.handleTempo(e)} className=\"btn btns btn-secondary\" disabled={(this.props.tempo===0.5)}> - </button>\n                    </div>\n                    <div className=\"col-sm tagg\">\n                        <p> Tempo ({ parseFloat(this.props.tempo).toFixed(1) }x) </p>\n                    </div>\n                    <div className=\"col-sm\">\n                        <button id=\"increaseTempo\" type=\"button\" onClick={e => this.props.handleTempo(e)} className=\"btn btns btn-secondary\" disabled={(this.props.tempo===2.0)}> + </button>\n                    </div>\n                </div>\n                <div className=\"row\">\n                    <div className=\"col-sm\">\n                        <button id=\"decreaseLatency\" type=\"button\" onClick={e => this.props.handleLatency(e)} className=\"btn btns btn-secondary\" disabled={(this.props.latency===0)}> - </button>\n                    </div>\n                    <div className=\"col-sm tagg\">\n                        <p>\n                            Audio Latency ({ (this.props.latency<0)?(this.props.latency):(\"+\"+this.props.latency) } sec) \n                        </p>\n                    </div>\n                    <div className=\"col-sm\">\n                        <button id=\"increaseLatency\" type=\"button\" onClick={e => this.props.handleLatency(e)} className=\"btn btns btn-secondary\" disabled={(this.props.latency===2.0)}> + </button>\n                    </div>\n                </div>\n            </div>\n        );\n    }\n};\n\n\nexport default Controller;\n","const React = require('react');\n\nclass YoutubeList extends React.Component {\n    \n    getYoutubeList(){\n        var res = [];\n        for(const [key,value] of this.props.yt_list.entries()){\n            if(value.message){\n                res.push(<tr key=\"-1\"><td><p>{value.message}</p></td></tr>);\n            }else{\n                res.push(<tr key={key}><td>\n                    <div className=\"yt_element\" onClick={e => this.props.getMedia(e,value.title,value.url)}>\n                        <div className=\"yt_thumb\">\n                            <img src={value.thumbnail} alt=\"\" className=\"yt_image\"/>\n                            <p className=\"yt_time\">({value.time})</p>\n                        </div>\n                        <div className=\"yt_info\">\n                            <p className=\"yt_title\">{value.title}</p>\n                            <p className=\"yt_author\">{value.author}</p> \n                        </div>\n                    </div></td></tr>\n                )\n            }\n        }\n        return res;\n    }\n\n    render() {\n        return (\n            <div \n                className=\"yt_table\" \n                style={{display: (this.props.yt_list.length>0)?('initial'):('none')}}\n            >\n            <hr/> \n                <div className=\"row\">\n                    <table className=\" table table-hover\">\n                        <tbody>\n                            {this.getYoutubeList()}\n                        </tbody>\n                    </table>\n                </div>\n            </div>\n        );\n    }\n};\n\n\nexport default YoutubeList;\n","const React = require('react');\n\nconst ErrorAlert = props => {\n    if (props.error === undefined) {\n        return null;\n    }\n\n    return (\n        <div className=\"alert alert-danger\">\n            <b>{props.error.type}:</b> {props.error.message}\n        </div>\n    );\n};\n\nexport default ErrorAlert;\n","const {SimpleFilter, SoundTouch} = require('../vendor/soundtouch');\nconst BUFFER_SIZE = 4096;\n\n//https://developer.mozilla.org/en-US/docs/Web/Guide/Audio_and_video_manipulation\nclass AudioPlayer {\n    constructor({emitter, pitch, tempo}) {\n        this.emitter = emitter;\n        this.context = new AudioContext();\n        this.scriptProcessor = this.context.createScriptProcessor(BUFFER_SIZE, 2, 2);\n        this.scriptProcessor.onaudioprocess = e => {\n            const l = e.outputBuffer.getChannelData(0);\n            const r = e.outputBuffer.getChannelData(1);\n            if(this.simpleFilter!=null){\n                const framesExtracted = this.simpleFilter.extract(this.samples, BUFFER_SIZE);\n                if (framesExtracted === 0) {\n                    this.emitter.emit('stop');\n                }\n                for (let i = 0; i < framesExtracted; i++) {\n                    l[i] = this.samples[i * 2];\n                    r[i] = this.samples[i * 2 + 1];\n                }\n            }\n        };\n\n        this.soundTouch = new SoundTouch();\n        this.soundTouch.pitch = pitch;\n        this.soundTouch.tempo = tempo;\n\n        this.duration = undefined;\n    }\n\n    //get and set pitch value\n    get pitch() {\n        return this.soundTouch.pitch;\n    }\n    set pitch(pitch) {\n        this.soundTouch.pitch = pitch;\n    }\n\n    //get and set tempo value\n    get tempo() {\n        return this.soundTouch.tempo;\n    }\n    set tempo(tempo) {\n        this.soundTouch.tempo = tempo;\n    }\n\n    //decode audio data and set buffer\n    decodeAudioData(data) {\n        return this.context.decodeAudioData(data);\n    }\n\n    //create a buffer source from given data and send info to observer\n    setBuffer(buffer,ref) {\n        const bufferSource = this.context.createBufferSource();\n        bufferSource.buffer = buffer;\n\n        this.samples = new Float32Array(BUFFER_SIZE * 2);\n        this.source = {\n            extract: (target, numFrames, position) => {\n                this.emitter.emit('state', {t: position / this.context.sampleRate});\n                const l = buffer.getChannelData(0);\n                const r = buffer.getChannelData(1);\n                for (let i = 0; i < numFrames; i++) {\n                    target[i * 2] = l[i + position];\n                    target[i * 2 + 1] = r[i + position];\n                }\n                return Math.min(numFrames, l.length - position);\n            },\n        };\n        this.simpleFilter = new SimpleFilter(this.source, this.soundTouch);\n\n        this.duration = buffer.duration;\n        this.emitter.emit('state', {duration: buffer.duration});\n    }\n\n    //play and pause audio\n    play() {\n        this.context.resume();\n        this.scriptProcessor.connect(this.context.destination);\n    }\n    pause() {\n        this.context.resume();\n        this.scriptProcessor.disconnect(this.context.destination);\n    }\n\n    //set current source position to requested percentage of the full-length \n    seekPercent(percent) {\n        if (this.simpleFilter !== undefined) {\n            this.simpleFilter.sourcePosition = Math.round(\n                percent / 100 * this.duration * this.context.sampleRate\n            );\n        }\n    }\n}\n\nexport default AudioPlayer;\n","import FilenameLabel from'./FilenameLabel.jsx';\nimport PopularList from'./PopularList.jsx';\nimport Controller from'./Controller.jsx';\nimport YoutubeList from'./YoutubeList.jsx';\nimport ErrorAlert from'./ErrorAlert.jsx';\nimport AudioPlayer from './../lib/AudioPlayer';\nimport axios from 'axios';\n\nconst EventEmitter = require('events').EventEmitter;\nconst React = require('react');\n\nclass Karaoke extends React.Component {\n\n\tconstructor(props) {\n        super(props);\n        this.ref = React.createRef();\n        this.state = {\n            action: 'stop',\n            duration: undefined,\n            error: undefined,\n            filename: undefined,\n            pitch: 1.0,\n            pitch_key: 0,\n            simpleFilter: undefined,\n            status: [],\n            t: 0,\n            tempo: 1.0,\n            file: \"\",\n            yt_title: \"\",\n            yt_url: \"\",\n            yt_list: [],\n            loading: \"\",\n            latency: 0.0,\n            api_key: \"\",\n            kr_chart: [],\n            en_chart: [],\n            chartPage: 0,\n        };\n\n\n        //create an observer\n        this.emitter = new EventEmitter();\n        this.emitter.on('state', state => this.setState(state));\n        this.emitter.on('status', status => {\n            if (status === 'Done!') {\n                this.setState({status: []});\n            } else {\n                this.setState({status: this.state.status.concat(status)});\n            }\n        });\n        this.emitter.on('stop', () => this.stop());\n\n\n        //create an audio player\n        this.audioPlayer = new AudioPlayer({\n            emitter: this.emitter,\n            pitch: this.state.pitch,\n            tempo: this.state.tempo,\n        });\n\n        //initialize in-app helper variables and functions\n        this.inputRef = React.createRef();\n\n        this.handleSeek = this.handleSeek.bind(this);\n        this.handleTitle = this.handleTitle.bind(this);\n        this.handleURL = this.handleURL.bind(this);\n\n        this.handlePitch = this.handlePitch.bind(this);\n        this.handleTempo = this.handleTempo.bind(this);\n        this.handleLatency = this.handleLatency.bind(this);\n\n        this.loadFile = this.loadFile.bind(this);\n        this.getMedia = this.getMedia.bind(this);\n\n        this.toggleTJChart = this.toggleTJChart.bind(this);\n        this.findOnYoutube = this.findOnYoutube.bind(this);\n        this.moveChart = this.moveChart.bind(this);\n        this.resetChart = this.resetChart.bind(this);\n    }\n\n/* React Page related methods */\n    //At the beginning of the app\n    componentDidMount() {\n        this.stop();\n        this.getApiKey()\n            .then(res => this.setState({ api_key: res }))\n                .catch(err => console.log(err));\n        this.getTJChart()\n            .then(res => this.setState({ kr_chart: res.top100 }))\n                .catch(err => console.log(err));\n        this.getSingKingPlaylist()\n            .then(res => this.setState({ en_chart: res}))\n                .catch(err => console.log(err));\n    }\n    //At the end of the app\n    componentWillUnmount() {\n        this.stop();\n    }\n\n    getApiKey = async () => {\n        const response = await fetch('/api/api_key');\n        const body = await response.json();\n        if (response.status !== 200) throw Error(body.message);\n        return body.api_key;\n    };\n\n/* Video&Audio player methods */\n    //only gets called from video player\n    play() {\n        if (this.state.action !== 'play') {\n            this.audioPlayer.play();\n            this.setState({action: 'play'});\n            this.ref.current.playbackRate = this.state.tempo;\n        }\n    }\n    //called iff video player is paused\n    pause() {\n        if (this.state.action === 'play') {\n            this.audioPlayer.pause();\n            this.setState({action: 'pause'});\n        }\n    }\n    //gets called when video player onStop()\n    stop() {\n        this.pause();\n        this.audioPlayer.seekPercent(0);\n        this.setState({action: 'stop', t: 0});\n        this.ref.current.currentTime = 0;\n        this.ref.current.pause();\n    }\n    //get file inputs from user to be played\n    handleFileChange(e) {\n        e.preventDefault();\n        this.setState({yt_list:[],yt_title:\"\",chartPage:0});\n        if (e.target.files.length > 0) {\n            this.stop();\n            this.setState({chartPage : 0,loading:'loading'});\n            var filename = e.target.value.replace('C:\\\\fakepath\\\\', '');\n            filename = filename.substring(0,filename.length-4)\n            const file = e.target.files[0];\n            this.loadFile(file,filename);\n        }\n    }\n    //handle seek in video player\n    handleSeek(e) {\n        e.preventDefault();\n        if(this.ref.current!=null && !this.ref.current.paused && this.state.loading==='loaded'){\n            var current = this.ref.current.currentTime;\n            if(current<this.prev-0.5*this.state.tempo || this.prev+0.5*this.state.tempo<current || current<0.5){\n                const percent = ( parseFloat(this.ref.current.currentTime) + parseFloat(this.state.latency) ) / this.state.duration*100;\n                this.audioPlayer.seekPercent(percent);\n                this.play();\n            } \n            this.prev = current;\n        }\n    }\n    syncMusic(e){\n        e.preventDefault();\n        if(this.ref.current!=null && !this.ref.current.paused && this.state.loading==='loaded'){\n            const percent = (parseFloat(this.ref.current.currentTime)+parseFloat(this.state.latency))/this.state.duration*100;\n            this.audioPlayer.seekPercent(percent);\n            this.play();\n        }\n    }\n    //load file and play blob on both audio & video\n    loadFile(file,filename) {\n        this.emitter.emit('status', 'Reading file...');\n        this.emitter.emit('state', {\n            error: undefined,\n            filename: undefined,\n        });\n        this.emitter.emit('state', {filename});\n        var fileURL = URL.createObjectURL(file);\n        this.setState({file : fileURL});\n        const reader = new FileReader();\n        reader.readAsArrayBuffer(file);\n        reader.onload = async event => {\n            this.emitter.emit('status', 'Playing file...');\n            let buffer;\n            try {\n                buffer = await this.audioPlayer.decodeAudioData(event.target.result);\n            } catch (err) {\n                this.emitter.emit('state', {\n                    error: {\n                        message: err.message,\n                        type: 'Decoding error',\n                    },\n                });\n                return;\n            }\n            this.audioPlayer.setBuffer(buffer);\n            this.setState({loading: 'loaded'});\n        };\n    }\n\n\n/* API related methods */\n\n    //get music filenames from server\n    getFiles = async () => {\n        const response = await fetch('/api/files');\n        const body = response.json();\n        if (response.status !== 200) throw Error(body.message);\n        return body;\n    };\n\n    //clear media and get new media blob\n    async getMedia(e,yt_title,yt_url){\n        e.preventDefault();\n\n        this.setState({yt_list:[],yt_title:\"\"});\n        this.getMusic(yt_url,yt_title);\n    }\n\n    //get video blob\n    async getMusic(yt_url,yt_title) {\n        this.setState({chartPage:0,loading:'loading'});\n        this.stop();\n        var file;\n\n        var url = '/api/music?url='+yt_url+'&title='+yt_title;\n\n        await fetch( url, {\n            method: 'GET',\n            headers: {},\n        }).then(function (response) {\n            return response.blob();\n        }).then(function(blob) {\n            file = blob;\n        }).catch(error => {});\n        this.loadFile(file,yt_title);\n    }\n\n    async getTJChart() {\n        const response = await fetch('/api/TJ');\n        const body = response.json();\n        if (response.status !== 200) throw Error(body.message);\n        return body;\n    }\n\n\n/* HTML related methods */\n    //toggle the list of saved music\n\n    //handle input text for title of youtube in search box\n    handleTitle(e){\n        e.preventDefault();\n        this.setState({yt_title : e.target.value});\n    }\n    handleURL(e){\n        e.preventDefault();\n        this.setState({yt_url : e.target.value});\n    }\n    getVideoFromYoutube(e){\n        e.preventDefault();\n        var url = e.target[0].value;\n        this.setState({yt_list:[],yt_title:\"\"});\n        this.getMusic(url,url.substring(url.length-6));\n    }\n\n    //send title to be searched to server and get short videos \n    searchOnYoutube(e) {\n        e.preventDefault();\n        this.setState({chartPage: 0});\n        var search_title = e.target[1].value;\n        this.requestYoutubeSearch(search_title);\n    }\n\n    findOnYoutube(e){\n        e.preventDefault();\n        var search_title = e.target.textContent;\n        this.requestYoutubeSearch(search_title);\n        this.setState({chartPage:0});\n    }\n\n    async requestYoutubeSearch(search_title) {\n        const api_key= this.state.api_key;\n        const youtube = axios.create({\n            baseURL:'https://www.googleapis.com/youtube/v3',\n            params:\n            {\n                part:'id,snippet',\n                maxResults:10,\n                key: api_key\n            }\n        });\n        const res = await youtube.get('/search', {params: { q: search_title+\" karaoke\" }});\n        var result = [];\n        var tmp = \"\"\n        for(let i=0;i<res.data.items.length;i++){\n            tmp += (i===0)?(\"\"):(\",\");\n            tmp += res.data.items[i].id.videoId;\n        }\n\n        const youtube2 = axios.create({\n            baseURL:'https://www.googleapis.com/youtube/v3',\n            params:{ part:'contentDetails', key: api_key }\n            });\n        const details = await youtube2.get('/videos', {params: {id: tmp }});\n        var count = (res.data.items.length<5)?(res.data.items.length):(5);\n\n        for(let i=0;i<count;i++){\n            if(details.data.items[i] && res.data.items[i].id.videoId){\n\n                //get hour, min, and sec\n                var str = details.data.items[i].contentDetails.duration;\n                var hour, min, sec;\n                var num = \"\";\n                for(let j=0;j<str.length;j++){\n                    switch(str[j]){\n                        case 'P': break;\n                        case 'T': break;\n                        case 'H':\n                            hour = \"0\".repeat(2-num.length)+num;\n                            num = \"\";\n                            break;\n                        case 'M':\n                            min = \"0\".repeat(2-num.length)+num;\n                            num = \"\";\n                            break;\n                        case 'S':\n                            sec = \"0\".repeat(2-num.length)+num;\n                            num = \"\";\n                            break;\n                        default:\n                            num += str[j];\n                            break;\n                    }\n                }\n\n                //fill empty fields\n                hour = (hour===undefined)?('00'):(hour);\n                min = (min===undefined)?('00'):(min);\n                sec = (sec===undefined)?('00'):(sec);\n\n                //get duration\n                var duration = (hour===\"00\")?(min+\":\"+sec):(hour+\":\"+min+\":\"+sec);\n\n                if(hour===\"00\" && min<=\"05\" && min>=\"02\"){\n                    var v = res.data.items[i].snippet;\n                    var url = \"http://www.youtube.com/watch?v=\"+res.data.items[i].id.videoId;\n                    var title = v.title.replaceAll('/','').replaceAll(/\\s\\s+/g, ' ');\n                    result.push({title: title, time: duration, url: url, author: v.channelTitle, thumbnail: v.thumbnails.medium.url});\n                }\n            }else{\n                count++;\n            }\n        }\n        if(result.length===0){\n            result.push({message: 'No Search Results Found.'});\n        }\n        this.setState({yt_list: result});\n    }\n\n    //reload the app\n    refreshPage(e){\n        e.preventDefault();\n        window.location.reload();\n    }\n\n\n/* Soundsource related methods */\n    //handle pitch changes\n    handlePitch(e){\n        e.preventDefault();\n        var btn_id = e.target.id;\n        var pitch_key = this.state.pitch_key;\n        if(btn_id===\"decreasePitch\"){\n            pitch_key = this.state.pitch_key-1;\n        }else if(btn_id===\"increasePitch\"){\n            pitch_key = this.state.pitch_key+1;\n        }\n        const pitch = this.getPitchValue(pitch_key);\n        this.audioPlayer.pitch = pitch;\n        this.setState({pitch_key});\n        this.setState({pitch});\n    }\n    //get adjusted pitch value\n    getPitchValue(val) {\n        var s_var = (val>=0)?(parseInt(val)):(12+parseInt(val));\n        //https://en.wikipedia.org/wiki/12_equal_temperament\n        var num = Math.pow(2, (s_var/12)).toFixed(3);\n        const pitch = (val>=0)?(num):(num/2);\n        return pitch;\n    }\n\n    //Handle Tempo Changes\n    handleTempo(e){\n        e.preventDefault();\n        var btn_id = e.target.id;\n        var val = 0;\n        if(btn_id===\"decreaseTempo\"){\n            val = -0.1;\n        }else if(btn_id===\"increaseTempo\"){\n            val = 0.1;\n        }\n        const tempo = +(Math.round(this.state.tempo+val + \"e+2\")  + \"e-2\");\n        this.audioPlayer.tempo = tempo;\n        this.setState({tempo});\n        this.ref.current.playbackRate = tempo;\n    }\n\n    //Handle Latency Changes \n    handleLatency(e){\n        e.preventDefault();\n        var btn_id = e.target.id;\n        var val = 0;\n        if(btn_id===\"decreaseLatency\"){\n            val = -0.1;\n        }else if(btn_id===\"increaseLatency\"){\n            val = 0.1;\n        }\n        const latency = +(Math.round(this.state.latency+val + \"e+2\")  + \"e-2\");\n        this.setState({latency});\n        var cur = parseFloat(this.ref.current.currentTime)+parseFloat(latency);\n        const percent = cur/this.state.duration*100;\n        this.audioPlayer.seekPercent(percent);\n        if(!this.ref.current.paused){ this.play(); }\n\n    }\n\n    toggleTJChart(e){\n        e.preventDefault();\n        var newPage = (this.state.chartPage===0)?(1):(0);\n        if(newPage>0){this.setState({yt_list:[],yt_title:\"\"});}\n        this.setState({chartPage : newPage});\n    }\n\n    moveChart(e){\n        e.preventDefault();\n        var txt = e.target.textContent;\n        switch(txt){\n            case 'next' : \n                this.setState({chartPage: this.state.chartPage+1});\n                break;\n            case 'prev' : \n                this.setState({chartPage: this.state.chartPage-1});\n                break;\n            default:\n                break;\n        }\n    }\n    resetChart(){\n        this.setState({chartPage: 1});\n    }\n\n    async getSingKingPlaylist(){\n        const res = await axios.get(`https://www.googleapis.com/youtube/v3/playlistItems`, {\n            params: {\n                part: 'id,snippet',\n                maxResults: 50,\n                playlistId: 'PL8D4Iby0Bmm9y57_K3vBvkZiaGjIXD_x5',\n                key: 'AIzaSyDDOuq1TeHbaGMVXGkEG1uIo4EOZDyWvlI'\n            }\n        });\n        var arr = [];\n        for(var i=0;i<res.data.items.length;i++){\n            var title = res.data.items[i].snippet.title;\n            arr.push({\"title\" : title});\n        }\n        return arr;\n    };\n\n\n\trender (){\n\n\t  \treturn (\n\t  \t\t<div className=\"Karaoke\">\n                <div id=\"header\" className=\"title_header alert alert-info\" onClick={e => this.refreshPage(e)}>\n                    Infinite Coin Karaoke\n                </div>\n\n                <div className=\"row\">\n                    <label\n                        className=\"btn btn-primary btn-md file-btns\"\n                        htmlFor=\"upload-file\"\n                        style={{marginRight: '0.25em', marginBottom: '1em'}}\n                    >\n                        <input\n                            id=\"upload-file\"\n                            accept=\"video\"\n                            type=\"file\"\n                            style={{display: 'none'}}\n                            onChange={e => this.handleFileChange(e)}\n                        />\n                        Upload from Your Device\n                    </label>\n\n                    <button className=\"btn btn-primary btn-md file-btns\" style={{marginRight: '0.25em', marginBottom: '1em'}} onClick={e => this.toggleTJChart(e)}>{(this.state.chartPage>0)?('Hide'):('Display')} Popular Songs</button>\n\n                </div>\n\n                <div className=\"row\">\n                    <form onSubmit={e => this.searchOnYoutube(e)} className=\"youtube-form\">\n                        <input type=\"text\" autoFocus=\"autofocus\" style={{display:\"none\"}} />\n                        <input id=\"yt_title\" value={this.state.yt_title} onChange={e => this.handleTitle(e)} type=\"text\" placeholder=\"Search on Youtube\" className=\"form-control\"/>\n                        <input type=\"submit\" className=\"btn btn-danger btn-md\" value=\"Search\"/>\n                    </form>\n                </div>\n\n                <PopularList\n                    en_chart={this.state.en_chart}\n                    kr_chart={this.state.kr_chart}\n                    chartPage={this.state.chartPage}\n                    findOnYoutube={this.findOnYoutube}\n                    moveChart={this.moveChart}\n                    resetChart={this.resetChart}\n                />\n\n                <ErrorAlert error={this.state.error} />\n            \n\n                <YoutubeList yt_list = {this.state.yt_list} getMedia = {this.getMedia}/>\n\n\n                <div style={{display: (this.state.loading ==='loaded')?('initial'):('none')}}>\n                    <hr/> \n                    <div className=\"row\">\n                        <FilenameLabel error={this.state.error} filename={this.state.filename} />\n                        <div>\n                            <video muted ref={this.ref} src={this.state.file} id=\"my-video\" className=\"vid\" controls onTimeUpdate={e => this.handleSeek(e)} onPlay={e => this.syncMusic(e)} onPause={this.pause.bind(this)} controlsList=\"nodownload\" autoPlay>\n                            </video>\n                            <a className=\"btn btn-secondary\" href={this.state.file} download={this.state.filename+\".mp4\"}>download</a>\n                        </div>\n                    </div>\n                    <br/>\n\n\n                    <Controller\n                        pitch_key={this.state.pitch_key}\n                        tempo={this.state.tempo}\n                        latency={this.state.latency}\n                        handlePitch={this.handlePitch}\n                        handleTempo={this.handleTempo}\n                        handleLatency={this.handleLatency}\n                    />\n                </div>\n\n                <div style={{width:'100%', display: (this.state.loading ==='loading')?('initial'):('none')}}>\n                    <img src=\"https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif\" style={{ width:'50%',marginLeft:'25%', marginRight:'25%'}} alt=\"loading...\" />\n                </div>\n\t\t    </div>\n\n\t    )\n\t}\n\n}\n\nexport default Karaoke;\n","import React, { Component } from 'react';\nimport './App.css';\n\n//import Navigation from './components/Navigation.jsx';\nimport Karaoke from './components/Karaoke.jsx';\n//import { BrowserRouter, Route, Switch } from 'react-router-dom';\n\n\nclass App extends Component {\n  \nrender() {\n    return (\n        <div className=\"App\">\n            <div>\n                <div>\n                <Karaoke/>\n                    {/*<BrowserRouter>\n                        <div>\n                            <Navigation />\n                            <Switch>\n                                <Route path=\"/\" component={Karaoke} exact/>\n                            </Switch>\n                        </div> \n                    </BrowserRouter>\n                */}\n                </div>\n            </div>\n            <hr/>\n        </div>\n    );\n  }\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './App.css';\nimport './css/bootstrap.css';\nimport './css/my.css';\nimport './css/octicons.css';\n\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <App />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();"],"sourceRoot":""}