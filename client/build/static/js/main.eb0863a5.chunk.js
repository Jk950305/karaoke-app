(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{13:function(t,e,i){},32:function(t,e){function i(t,e){for(var i in e){var s=e.__lookupGetter__(i),r=e.__lookupSetter__(i);s||r?(s&&t.__defineGetter__(i,s),r&&t.__defineSetter__(i,r)):t[i]=e[i]}return t}function s(t,e){return(t>e?t-e:e-t)>1e-10}function r(t){t?(this.inputBuffer=new a,this.outputBuffer=new a):this.inputBuffer=this.outputBuffer=null}function n(t){r.call(this,t),this._reset(),this.rate=1}function a(){this._vector=new Float32Array,this._position=0,this._frameCount=0}function o(t){this._pipe=t}function u(t,e){o.call(this,e),this.sourceSound=t,this.historyBufferSize=22050,this._sourcePosition=0,this.outputBufferPosition=0,this._position=0}r.prototype={get inputBuffer(){return this._inputBuffer},set inputBuffer(t){this._inputBuffer=t},get outputBuffer(){return this._outputBuffer},set outputBuffer(t){this._outputBuffer=t},clear:function(){this._inputBuffer.clear(),this._outputBuffer.clear()}},i(n.prototype,r.prototype),i(n.prototype,{set rate(t){this._rate=t},_reset:function(){this.slopeCount=0,this.prevSampleL=0,this.prevSampleR=0},clone:function(){var t=new n;return t.rate=this._rate,t},process:function(){var t=this._inputBuffer.frameCount;this._outputBuffer.ensureAdditionalCapacity(t/this._rate+1);var e=this._transpose(t);this._inputBuffer.receive(),this._outputBuffer.put(e)},_transpose:function(t){if(0===t)return 0;for(var e=this._inputBuffer.vector,i=this._inputBuffer.startIndex,s=this._outputBuffer.vector,r=this._outputBuffer.endIndex,n=0,a=0;this.slopeCount<1;)s[r+2*a]=(1-this.slopeCount)*this.prevSampleL+this.slopeCount*e[i],s[r+2*a+1]=(1-this.slopeCount)*this.prevSampleR+this.slopeCount*e[i+1],a++,this.slopeCount+=this._rate;if(this.slopeCount-=1,1!==t)t:for(;;){for(;this.slopeCount>1;)if(this.slopeCount-=1,++n>=t-1)break t;var o=i+2*n;s[r+2*a]=(1-this.slopeCount)*e[o]+this.slopeCount*e[o+2],s[r+2*a+1]=(1-this.slopeCount)*e[o+1]+this.slopeCount*e[o+3],a++,this.slopeCount+=this._rate}return this.prevSampleL=e[i+2*t-2],this.prevSampleR=e[i+2*t-1],a}}),a.prototype={get vector(){return this._vector},get position(){return this._position},get startIndex(){return 2*this._position},get frameCount(){return this._frameCount},get endIndex(){return 2*(this._position+this._frameCount)},clear:function(){this.receive(this._frameCount),this.rewind()},put:function(t){this._frameCount+=t},putSamples:function(t,e,i){var s=2*(e=e||0);i>=0||(i=(t.length-s)/2);var r=2*i;this.ensureCapacity(i+this._frameCount);var n=this.endIndex;this._vector.set(t.subarray(s,s+r),n),this._frameCount+=i},putBuffer:function(t,e,i){e=e||0,i>=0||(i=t.frameCount-e),this.putSamples(t.vector,t.position+e,i)},receive:function(t){t>=0&&!(t>this._frameCount)||(t=this._frameCount),this._frameCount-=t,this._position+=t},receiveSamples:function(t,e){var i=2*e,s=this.startIndex;t.set(this._vector.subarray(s,s+i)),this.receive(e)},extract:function(t,e,i){var s=this.startIndex+2*e,r=2*i;t.set(this._vector.subarray(s,s+r))},ensureCapacity:function(t){var e=2*t;if(this._vector.length<e){var i=new Float32Array(e);i.set(this._vector.subarray(this.startIndex,this.endIndex)),this._vector=i,this._position=0}else this.rewind()},ensureAdditionalCapacity:function(t){this.ensureCapacity(this.frameCount+t)},rewind:function(){this._position>0&&(this._vector.set(this._vector.subarray(this.startIndex,this.endIndex)),this._position=0)}},o.prototype={get pipe(){return this._pipe},get inputBuffer(){return this._pipe.inputBuffer},get outputBuffer(){return this._pipe.outputBuffer},fillOutputBuffer:function(t){for(;this.outputBuffer.frameCount<t;){var e=16384-this.inputBuffer.frameCount;if(this.fillInputBuffer(e),this.inputBuffer.frameCount<16384)break;this._pipe.process()}},clear:function(){this._pipe.clear()}},i(u.prototype,o.prototype),i(u.prototype,{get position(){return this._position},set position(t){if(t>this._position)throw new RangeError("New position may not be greater than current position");var e=this.outputBufferPosition-(this._position-t);if(e<0)throw new RangeError("New position falls outside of history buffer");this.outputBufferPosition=e,this._position=t},get sourcePosition(){return this._sourcePosition},set sourcePosition(t){this.clear(),this._sourcePosition=t},fillInputBuffer:function(t){var e=new Float32Array(2*t),i=this.sourceSound.extract(e,t,this._sourcePosition);this._sourcePosition+=i,this.inputBuffer.putSamples(e,0,i)},extract:function(t,e){this.fillOutputBuffer(this.outputBufferPosition+e);var i=Math.min(e,this.outputBuffer.frameCount-this.outputBufferPosition);this.outputBuffer.extract(t,this.outputBufferPosition,i);var s=this.outputBufferPosition+i;return this.outputBufferPosition=Math.min(this.historyBufferSize,s),this.outputBuffer.receive(Math.max(s-this.historyBufferSize,0)),this._position+=i,i},handleSampleData:function(t){this.extract(t.data,4096)},clear:function(){o.prototype.clear.call(this),this.outputBufferPosition=0}});var c=[[124,186,248,310,372,434,496,558,620,682,744,806,868,930,992,1054,1116,1178,1240,1302,1364,1426,1488,0],[-100,-75,-50,-25,25,50,75,100,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-20,-15,-10,-5,5,10,15,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[-4,-3,-2,-1,1,2,3,4,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],h=-10/1.5;function l(t){r.call(this,t),this.bQuickSeek=!0,this.bMidBufferDirty=!1,this.pMidBuffer=null,this.overlapLength=0,this.bAutoSeqSetting=!0,this.bAutoSeekSetting=!0,this._tempo=1,this.setParameters(44100,0,0,8)}function p(){this.rateTransposer=new n(!1),this.tdStretch=new l(!1),this._inputBuffer=new a,this._intermediateBuffer=new a,this._outputBuffer=new a,this._rate=0,this.tempo=0,this.virtualPitch=1,this.virtualRate=1,this.virtualTempo=1,this._calculateEffectiveRateAndTempo()}i(l.prototype,r.prototype),i(l.prototype,{clear:function(){r.prototype.clear.call(this),this._clearMidBuffer()},_clearMidBuffer:function(){this.bMidBufferDirty&&(this.bMidBufferDirty=!1,this.pMidBuffer=null)},setParameters:function(t,e,i,s){t>0&&(this.sampleRate=t),s>0&&(this.overlapMs=s),e>0?(this.sequenceMs=e,this.bAutoSeqSetting=!1):this.bAutoSeqSetting=!0,i>0?(this.seekWindowMs=i,this.bAutoSeekSetting=!1):this.bAutoSeekSetting=!0,this.calcSeqParameters(),this.calculateOverlapLength(this.overlapMs),this.tempo=this._tempo},set tempo(t){var e;this._tempo=t,this.calcSeqParameters(),this.nominalSkip=this._tempo*(this.seekWindowLength-this.overlapLength),this.skipFract=0,e=Math.floor(this.nominalSkip+.5),this.sampleReq=Math.max(e+this.overlapLength,this.seekWindowLength)+this.seekLength},get inputChunkSize(){return this.sampleReq},get outputChunkSize(){return this.overlapLength+Math.max(0,this.seekWindowLength-2*this.overlapLength)},calculateOverlapLength:function(t){var e;(e=this.sampleRate*t/1e3)<16&&(e=16),e-=e%8,this.overlapLength=e,this.pRefMidBuffer=new Float32Array(2*this.overlapLength),this.pMidBuffer=new Float32Array(2*this.overlapLength)},checkLimits:function(t,e,i){return t<e?e:t>i?i:t},calcSeqParameters:function(){var t,e;this.bAutoSeqSetting&&(t=150+-50*this._tempo,t=this.checkLimits(t,50,125),this.sequenceMs=Math.floor(t+.5)),this.bAutoSeekSetting&&(e=28.333333333333332+h*this._tempo,e=this.checkLimits(e,15,25),this.seekWindowMs=Math.floor(e+.5)),this.seekWindowLength=Math.floor(this.sampleRate*this.sequenceMs/1e3),this.seekLength=Math.floor(this.sampleRate*this.seekWindowMs/1e3)},set quickSeek(t){this.bQuickSeek=t},clone:function(){var t=new l;return t.tempo=this.tempo,t.setParameters(this.sampleRate,this.sequenceMs,this.seekWindowMs,this.overlapMs),t},seekBestOverlapPosition:function(){return this.bQuickSeek?this.seekBestOverlapPositionStereoQuick():this.seekBestOverlapPositionStereo()},seekBestOverlapPositionStereo:function(){var t,e,i,s;for(this.precalcCorrReferenceStereo(),e=Number.MIN_VALUE,t=0,s=0;s<this.seekLength;s++)(i=this.calcCrossCorrStereo(2*s,this.pRefMidBuffer))>e&&(e=i,t=s);return t},seekBestOverlapPositionStereoQuick:function(){var t,e,i,s,r,n,a;for(this.precalcCorrReferenceStereo(),i=Number.MIN_VALUE,e=0,n=0,a=0,r=0;r<4;r++){for(t=0;c[r][t]&&!((a=n+c[r][t])>=this.seekLength);)(s=this.calcCrossCorrStereo(2*a,this.pRefMidBuffer))>i&&(i=s,e=a),t++;n=e}return e},precalcCorrReferenceStereo:function(){var t,e,i;for(t=0;t<this.overlapLength;t++)i=t*(this.overlapLength-t),e=2*t,this.pRefMidBuffer[e]=this.pMidBuffer[e]*i,this.pRefMidBuffer[e+1]=this.pMidBuffer[e+1]*i},calcCrossCorrStereo:function(t,e){var i,s,r,n=this._inputBuffer.vector;for(t+=this._inputBuffer.startIndex,i=0,s=2;s<2*this.overlapLength;s+=2)i+=n[r=s+t]*e[s]+n[r+1]*e[s+1];return i},overlap:function(t){this.overlapStereo(2*t)},overlapStereo:function(t){var e=this._inputBuffer.vector;t+=this._inputBuffer.startIndex;var i,s,r,n,a,o,u,c=this._outputBuffer.vector,h=this._outputBuffer.endIndex;for(n=1/this.overlapLength,i=0;i<this.overlapLength;i++)r=(this.overlapLength-i)*n,a=i*n,o=(s=2*i)+t,c[(u=s+h)+0]=e[o+0]*a+this.pMidBuffer[s+0]*r,c[u+1]=e[o+1]*a+this.pMidBuffer[s+1]*r},process:function(){var t,e,i;if(null==this.pMidBuffer){if(this._inputBuffer.frameCount<this.overlapLength)return;this.pMidBuffer=new Float32Array(2*this.overlapLength),this._inputBuffer.receiveSamples(this.pMidBuffer,this.overlapLength)}for(;this._inputBuffer.frameCount>=this.sampleReq;){e=this.seekBestOverlapPosition(),this._outputBuffer.ensureAdditionalCapacity(this.overlapLength),this.overlap(Math.floor(e)),this._outputBuffer.put(this.overlapLength),(i=this.seekWindowLength-2*this.overlapLength)>0&&this._outputBuffer.putBuffer(this._inputBuffer,e+this.overlapLength,i);var s=this.inputBuffer.startIndex+2*(e+this.seekWindowLength-this.overlapLength);this.pMidBuffer.set(this._inputBuffer.vector.subarray(s,s+2*this.overlapLength)),this.skipFract+=this.nominalSkip,t=Math.floor(this.skipFract),this.skipFract-=t,this._inputBuffer.receive(t)}}}),i(l.prototype,{get tempo(){return this._tempo}}),i(p.prototype,{clear:function(){this.rateTransposer.clear(),this.tdStretch.clear()},clone:function(){var t=new p;return t.rate=this.rate,t.tempo=this.tempo,t},get rate(){return this._rate},set rate(t){this.virtualRate=t,this._calculateEffectiveRateAndTempo()},set rateChange(t){this.rate=1+.01*t},get tempo(){return this._tempo},set tempo(t){this.virtualTempo=t,this._calculateEffectiveRateAndTempo()},set tempoChange(t){this.tempo=1+.01*t},set pitch(t){this.virtualPitch=t,this._calculateEffectiveRateAndTempo()},set pitchOctaves(t){this.pitch=Math.exp(.69314718056*t),this._calculateEffectiveRateAndTempo()},set pitchSemitones(t){this.pitchOctaves=t/12},get inputBuffer(){return this._inputBuffer},get outputBuffer(){return this._outputBuffer},_calculateEffectiveRateAndTempo:function(){var t=this._tempo,e=this._rate;this._tempo=this.virtualTempo/this.virtualPitch,this._rate=this.virtualRate*this.virtualPitch,s(this._tempo,t)&&(this.tdStretch.tempo=this._tempo),s(this._rate,e)&&(this.rateTransposer.rate=this._rate),this._rate>1?this._outputBuffer!==this.rateTransposer.outputBuffer&&(this.tdStretch.inputBuffer=this._inputBuffer,this.tdStretch.outputBuffer=this._intermediateBuffer,this.rateTransposer.inputBuffer=this._intermediateBuffer,this.rateTransposer.outputBuffer=this._outputBuffer):this._outputBuffer!==this.tdStretch.outputBuffer&&(this.rateTransposer.inputBuffer=this._inputBuffer,this.rateTransposer.outputBuffer=this._intermediateBuffer,this.tdStretch.inputBuffer=this._intermediateBuffer,this.tdStretch.outputBuffer=this._outputBuffer)},process:function(){this._rate>1?(this.tdStretch.process(),this.rateTransposer.process()):(this.rateTransposer.process(),this.tdStretch.process())}}),t.exports={SimpleFilter:u,SoundTouch:p}},52:function(t,e,i){},53:function(t,e,i){},54:function(t,e,i){},55:function(t,e,i){"use strict";i.r(e);var s=i(0),r=i(6),n=i(22),a=i.n(n),o=i(4),u=i(5),c=i(8),h=i(7),l=(i(13),i(1)),p=i.n(l),f=i(9),d=i(2),m=i(31),v=(i(6),function(t){if(void 0===t.filename||""===t.filename)return null;var e=["alert","filename-label"];void 0===t.error?e.push("alert-info"):e.push("alert-danger");var i=t.filename;return i="."===i.charAt(i.length-4)?i.substring(0,i.indexOf(".")):i,Object(s.jsx)("span",{className:m(e),children:i})}),b=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){var t;Object(o.a)(this,i);for(var s=arguments.length,r=new Array(s),n=0;n<s;n++)r[n]=arguments[n];return(t=e.call.apply(e,[this].concat(r))).state={language:"korean"},t.handleLanguage=function(e){t.setState({language:e.target.id}),t.props.resetChart()},t}return Object(u.a)(i,[{key:"getPopularList",value:function(t){var e=this,i=[],r=10*(this.props.chartPage-1),n=r+10;if(this.props.chartPage>0&&this.props.chartPage<=this.getChart().length/10)for(var a=r;a<n;a++){var o=t[a];if(o){var u=o.title;i.push(Object(s.jsxs)("tr",{children:[Object(s.jsx)("td",{style:{width:"15%"}}),Object(s.jsx)("td",{style:{width:"70%"},onClick:function(t){return e.props.findOnYoutube(t)},children:u}),Object(s.jsx)("td",{style:{width:"15%"}})]},a))}}return i}},{key:"getChart",value:function(){return"korean"===this.state.language?this.props.kr_chart:this.props.en_chart}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{style:{display:this.props.chartPage>0?"block":"none"},children:[Object(s.jsxs)("div",{className:"row",style:{width:"50%"},children:[Object(s.jsxs)("div",{style:{width:"50%",float:"left"},onChange:this.handleLanguage,children:[Object(s.jsx)("input",{type:"radio",id:"korean",name:"language",value:"korean",style:{margin:"0"},checked:"korean"===this.state.language,onChange:this.handleLanguage}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"korean",style:{margin:"0"},children:"Korean"})]}),Object(s.jsxs)("div",{style:{width:"50%",float:"right"},children:[Object(s.jsx)("input",{type:"radio",id:"english",name:"language",value:"english",style:{margin:"0"},checked:"english"===this.state.language,onChange:this.handleLanguage}),Object(s.jsx)("br",{}),Object(s.jsx)("label",{htmlFor:"english",style:{margin:"0"},children:"English"})]})]}),Object(s.jsxs)("table",{className:"table table-hover shrink-fonts",children:[Object(s.jsx)("thead",{children:Object(s.jsxs)("tr",{children:[Object(s.jsx)("th",{style:{width:"15%"},children:Object(s.jsx)("p",{className:"cursor",onClick:function(e){return t.props.moveChart(e)},children:this.props.chartPage>1?"prev":""})}),Object(s.jsx)("th",{style:{width:"70%"},children:Object(s.jsxs)("p",{className:"numbering",children:[" ",this.props.chartPage," "]})}),Object(s.jsx)("th",{style:{width:"15%"},children:Object(s.jsx)("p",{className:"cursor",onClick:function(e){return t.props.moveChart(e)},children:this.props.chartPage<this.getChart().length/10?"next":""})})]})}),Object(s.jsx)("tbody",{children:this.getPopularList(this.getChart())})]})]})}}]),i}(i(6).Component),g=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(o.a)(this,i),e.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{className:"container",children:[Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-sm",children:Object(s.jsx)("button",{id:"decreasePitch",type:"button",onClick:function(e){return t.props.handlePitch(e)},className:"btn btns btn-secondary",disabled:-12===this.props.pitch_key,children:" - "})}),Object(s.jsx)("div",{className:"col-sm tagg",children:Object(s.jsxs)("p",{children:["Pitch (",this.props.pitch_key<0?this.props.pitch_key:"+"+this.props.pitch_key," key)"]})}),Object(s.jsx)("div",{className:"col-sm",children:Object(s.jsx)("button",{id:"increasePitch",type:"button",onClick:function(e){return t.props.handlePitch(e)},className:"btn btns btn-secondary",disabled:12===this.props.pitch_key,children:" + "})})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-sm",children:Object(s.jsx)("button",{id:"decreaseTempo",type:"button",onClick:function(e){return t.props.handleTempo(e)},className:"btn btns btn-secondary",disabled:.5===this.props.tempo,children:" - "})}),Object(s.jsx)("div",{className:"col-sm tagg",children:Object(s.jsxs)("p",{children:[" Tempo (",parseFloat(this.props.tempo).toFixed(1),"x) "]})}),Object(s.jsx)("div",{className:"col-sm",children:Object(s.jsx)("button",{id:"increaseTempo",type:"button",onClick:function(e){return t.props.handleTempo(e)},className:"btn btns btn-secondary",disabled:2===this.props.tempo,children:" + "})})]}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)("div",{className:"col-sm",children:Object(s.jsx)("button",{id:"decreaseLatency",type:"button",onClick:function(e){return t.props.handleLatency(e)},className:"btn btns btn-secondary",disabled:0===this.props.latency,children:" - "})}),Object(s.jsx)("div",{className:"col-sm tagg",children:Object(s.jsxs)("p",{children:["Audio Latency (",this.props.latency<0?this.props.latency:"+"+this.props.latency," sec)"]})}),Object(s.jsx)("div",{className:"col-sm",children:Object(s.jsx)("button",{id:"increaseLatency",type:"button",onClick:function(e){return t.props.handleLatency(e)},className:"btn btns btn-secondary",disabled:2===this.props.latency,children:" + "})})]})]})}}]),i}(i(6).Component),y=i(24),j=i(23),_=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(o.a)(this,i),e.apply(this,arguments)}return Object(u.a)(i,[{key:"getYoutubeList",value:function(){var t,e=this,i=[],r=Object(j.a)(this.props.yt_list.entries());try{var n=function(){var r=Object(y.a)(t.value,2),n=r[0],a=r[1];a.message?i.push(Object(s.jsx)("tr",{children:Object(s.jsx)("td",{children:Object(s.jsx)("p",{children:a.message})})},"-1")):i.push(Object(s.jsx)("tr",{children:Object(s.jsx)("td",{children:Object(s.jsxs)("div",{className:"yt_element",onClick:function(t){return e.props.getMedia(t,a.title,a.url)},children:[Object(s.jsxs)("div",{className:"yt_thumb",children:[Object(s.jsx)("img",{src:a.thumbnail,alt:"",className:"yt_image"}),Object(s.jsxs)("p",{className:"yt_time",children:["(",a.time,")"]})]}),Object(s.jsxs)("div",{className:"yt_info",children:[Object(s.jsx)("p",{className:"yt_title",children:a.title}),Object(s.jsx)("p",{className:"yt_author",children:a.author})]})]})})},n))};for(r.s();!(t=r.n()).done;)n()}catch(a){r.e(a)}finally{r.f()}return i}},{key:"render",value:function(){return Object(s.jsxs)("div",{className:"yt_table",style:{display:this.props.yt_list.length>0?"initial":"none"},children:[Object(s.jsx)("hr",{}),Object(s.jsx)("div",{className:"row",children:Object(s.jsx)("table",{className:" table table-hover",children:Object(s.jsx)("tbody",{children:this.getYoutubeList()})})})]})}}]),i}(i(6).Component),k=(i(6),function(t){return void 0===t.error?null:Object(s.jsxs)("div",{className:"alert alert-danger",children:[Object(s.jsxs)("b",{children:[t.error.type,":"]})," ",t.error.message]})}),x=i(32),O=x.SimpleFilter,B=x.SoundTouch,S=4096,w=function(){function t(e){var i=this,s=e.emitter,r=e.pitch,n=e.tempo;Object(o.a)(this,t),this.emitter=s;var a=window.AudioContext||window.webkitAudioContext||!1;this.context=new a,this.scriptProcessor=this.context.createScriptProcessor(S,2,2),this.scriptProcessor.onaudioprocess=function(t){var e=t.outputBuffer.getChannelData(0),s=t.outputBuffer.getChannelData(1);if(null!=i.simpleFilter){var r=i.simpleFilter.extract(i.samples,S);0===r&&i.emitter.emit("stop");for(var n=0;n<r;n++)e[n]=i.samples[2*n],s[n]=i.samples[2*n+1]}},this.soundTouch=new B,this.soundTouch.pitch=r,this.soundTouch.tempo=n,this.duration=void 0}return Object(u.a)(t,[{key:"decodeAudioData",value:function(t){var e=this.context;return new Promise((function(i,s){e.decodeAudioData(t,(function(t){i(t)}),(function(t){s(t)}))}))}},{key:"setBuffer",value:function(t,e){var i=this;this.context.createBufferSource().buffer=t,this.samples=new Float32Array(8192),this.source={extract:function(e,s,r){i.emitter.emit("state",{t:r/i.context.sampleRate});for(var n=t.getChannelData(0),a=t.getChannelData(1),o=0;o<s;o++)e[2*o]=n[o+r],e[2*o+1]=a[o+r];return Math.min(s,n.length-r)}},this.simpleFilter=new O(this.source,this.soundTouch),this.duration=t.duration,this.emitter.emit("state",{duration:t.duration})}},{key:"play",value:function(){this.context.resume(),this.scriptProcessor.connect(this.context.destination)}},{key:"pause",value:function(){this.context.resume(),this.scriptProcessor.disconnect(this.context.destination)}},{key:"seekPercent",value:function(t){void 0!==this.simpleFilter&&(this.simpleFilter.sourcePosition=Math.round(t/100*this.duration*this.context.sampleRate)),this.context.resume()}},{key:"pitch",get:function(){return this.soundTouch.pitch},set:function(t){this.soundTouch.pitch=t}},{key:"tempo",get:function(){return this.soundTouch.tempo},set:function(t){this.soundTouch.tempo=t}}]),t}(),C=i(12),P=i.n(C),L=i(51).EventEmitter,M=i(6),T=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(t){var s;return Object(o.a)(this,i),(s=e.call(this,t)).getApiKey=Object(f.a)(p.a.mark((function t(){var e,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/api_key");case 2:return e=t.sent,t.next=5,e.json();case 5:if(i=t.sent,200===e.status){t.next=8;break}throw Error(i.message);case 8:return t.abrupt("return",i.api_key);case 9:case"end":return t.stop()}}),t)}))),s.getFiles=Object(f.a)(p.a.mark((function t(){var e,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/files");case 2:if(e=t.sent,i=e.json(),200===e.status){t.next=6;break}throw Error(i.message);case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)}))),s.ref=M.createRef(),s.sub=M.createRef(),s.state={action:"stop",duration:void 0,error:void 0,filename:void 0,pitch:1,pitch_key:0,simpleFilter:void 0,status:[],t:0,tempo:1,file:"",yt_title:"",yt_url:"",yt_list:[],loading:"",latency:0,api_key:"",kr_chart:[],en_chart:[],chartPage:0,silence:"",ios_click:!1},s.emitter=new L,s.emitter.on("state",(function(t){return s.setState(t)})),s.emitter.on("status",(function(t){"Done!"===t?s.setState({status:[]}):s.setState({status:s.state.status.concat(t)})})),s.emitter.on("stop",(function(){return s.stop()})),s.audioPlayer=new w({emitter:s.emitter,pitch:s.state.pitch,tempo:s.state.tempo}),s.inputRef=M.createRef(),s.handleSeek=s.handleSeek.bind(Object(d.a)(s)),s.handleTitle=s.handleTitle.bind(Object(d.a)(s)),s.handleURL=s.handleURL.bind(Object(d.a)(s)),s.handlePitch=s.handlePitch.bind(Object(d.a)(s)),s.handleTempo=s.handleTempo.bind(Object(d.a)(s)),s.handleLatency=s.handleLatency.bind(Object(d.a)(s)),s.loadFile=s.loadFile.bind(Object(d.a)(s)),s.getMedia=s.getMedia.bind(Object(d.a)(s)),s.toggleTJChart=s.toggleTJChart.bind(Object(d.a)(s)),s.findOnYoutube=s.findOnYoutube.bind(Object(d.a)(s)),s.moveChart=s.moveChart.bind(Object(d.a)(s)),s.resetChart=s.resetChart.bind(Object(d.a)(s)),s}return Object(u.a)(i,[{key:"componentDidMount",value:function(){var t=this;this.stop(),this.getApiKey().then((function(e){return t.saveApiKey(e)})).catch((function(t){return console.log(t)})),this.getTJChart().then((function(e){return t.setState({kr_chart:e.top100})})).catch((function(t){return console.log(t)})),this.getSingKingPlaylist().then((function(e){return t.setState({en_chart:e})})).catch((function(t){return console.log(t)})),this.getSilence().then((function(e){return t.setState({silence:e})})).catch((function(t){return console.log(t)}))}},{key:"componentWillUnmount",value:function(){this.stop()}},{key:"saveApiKey",value:function(t){return this.setState({api_key:t}),t}},{key:"play",value:function(){"play"!==this.state.action&&(this.audioPlayer.play(),this.setState({action:"play"}),this.ref.current.playbackRate=this.state.tempo,this.sub.current.playbackRate=this.state.tempo)}},{key:"pause",value:function(){"play"===this.state.action&&(this.audioPlayer.pause(),this.setState({action:"pause"}),this.sub.current.pause())}},{key:"stop",value:function(){this.pause(),this.audioPlayer.seekPercent(0),this.setState({action:"stop",t:0}),this.ref.current.currentTime=0,this.ref.current.pause(),this.sub.current.currentTime=0,this.sub.current.pause()}},{key:"handleFileChange",value:function(t){if(t.preventDefault(),this.setState({yt_list:[],yt_title:"",chartPage:0}),t.target.files.length>0){this.stop(),this.setState({chartPage:0,loading:"loading"});var e=t.target.value.replace("C:\\fakepath\\","");e=e.substring(0,e.length-4);var i=t.target.files[0];this.loadFile(i,e)}}},{key:"handleSeek",value:function(t){if(t.preventDefault(),this.handleVolume(t),null!=this.ref.current&&!this.ref.current.paused&&"loaded"===this.state.loading){var e=this.ref.current.currentTime;if(e<this.prev-.5*this.state.tempo||this.prev+.5*this.state.tempo<e||e<.5){var i=(parseFloat(this.ref.current.currentTime)+parseFloat(this.state.latency))/this.state.duration*100;this.audioPlayer.seekPercent(i),this.play()}this.prev=e}}},{key:"handleVolume",value:function(t){t.preventDefault(),null!=this.ref.current&&(this.ref.current.volume=0)}},{key:"syncMusic",value:function(t){if(t.preventDefault(),null!=this.ref.current&&!this.ref.current.paused&&"loaded"===this.state.loading){var e=(parseFloat(this.ref.current.currentTime)+parseFloat(this.state.latency))/this.state.duration*100;this.audioPlayer.seekPercent(e),this.play()}}},{key:"loadFile",value:function(t,e){var i=this;this.emitter.emit("status","Reading file..."),this.emitter.emit("state",{error:void 0,filename:void 0}),this.emitter.emit("state",{filename:e});var s=URL.createObjectURL(t);this.setState({file:s});var r=new FileReader;r.readAsArrayBuffer(t),r.onload=function(){var t=Object(f.a)(p.a.mark((function t(e){var s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i.emitter.emit("status","Playing file..."),t.prev=1,t.next=4,i.audioPlayer.decodeAudioData(e.target.result);case 4:s=t.sent,t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(1),i.emitter.emit("state",{error:{message:t.t0.message,type:"Decoding error"}}),t.abrupt("return");case 11:i.audioPlayer.setBuffer(s),i.setState({loading:"loaded"});case 13:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}()}},{key:"getMedia",value:function(){var t=Object(f.a)(p.a.mark((function t(e,i,s){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.preventDefault(),this.setState({yt_list:[],yt_title:""}),this.getMusic(s,i);case 3:case"end":return t.stop()}}),t,this)})));return function(e,i,s){return t.apply(this,arguments)}}()},{key:"getMusic",value:function(){var t=Object(f.a)(p.a.mark((function t(e,i){var s,r;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.setState({chartPage:0,loading:"loading"}),this.stop(),r="/api/music?url="+e+"&title="+i,t.next=5,fetch(r,{method:"GET",headers:{}}).then((function(t){return t.blob()})).then((function(t){s=t})).catch((function(t){}));case 5:this.loadFile(s,i);case 6:case"end":return t.stop()}}),t,this)})));return function(e,i){return t.apply(this,arguments)}}()},{key:"getSilence",value:function(){var t=Object(f.a)(p.a.mark((function t(){var e,i,s;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/silence",{method:"GET",headers:{}});case 2:return e=t.sent,(i=[]).push(e.blob()),s=URL.createObjectURL(new Blob(i,{type:"video/mp4"})),t.abrupt("return",s);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getTJChart",value:function(){var t=Object(f.a)(p.a.mark((function t(){var e,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/TJ");case 2:if(e=t.sent,i=e.json(),200===e.status){t.next=6;break}throw Error(i.message);case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"getSingKingPlaylist",value:function(){var t=Object(f.a)(p.a.mark((function t(){var e,i;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/api/SingKing");case 2:if(e=t.sent,i=e.json(),200===e.status){t.next=6;break}throw Error(i.message);case 6:return t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{key:"handleTitle",value:function(t){t.preventDefault(),this.setState({yt_title:t.target.value})}},{key:"handleURL",value:function(t){t.preventDefault(),this.setState({yt_url:t.target.value})}},{key:"getVideoFromYoutube",value:function(t){t.preventDefault();var e=t.target[0].value;this.setState({yt_list:[],yt_title:""}),this.getMusic(e,e.substring(e.length-6))}},{key:"searchOnYoutube",value:function(t){t.preventDefault(),this.setState({chartPage:0});var e=t.target[1].value;this.requestYoutubeSearch(e)}},{key:"findOnYoutube",value:function(t){t.preventDefault();var e=t.target.textContent;this.requestYoutubeSearch(e),this.setState({chartPage:0})}},{key:"requestYoutubeSearch",value:function(){var t=Object(f.a)(p.a.mark((function t(e){var i,s,r,n,a,o,u,c,h,l,f,d,m,v,b,g,y,j,_,k;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=this.state.api_key,s=P.a.create({baseURL:"https://www.googleapis.com/youtube/v3",params:{part:"id,snippet",maxResults:10,key:i}}),t.next=4,s.get("/search",{params:{q:e+" karaoke"}});case 4:for(r=t.sent,n=[],a="",o=0;o<r.data.items.length;o++)a+=0===o?"":",",a+=r.data.items[o].id.videoId;return u=P.a.create({baseURL:"https://www.googleapis.com/youtube/v3",params:{part:"contentDetails",key:i}}),t.next=11,u.get("/videos",{params:{id:a}});case 11:c=t.sent,h=r.data.items.length<5?r.data.items.length:5,l=0;case 14:if(!(l<h)){t.next=50;break}if(!c.data.items[l]||!r.data.items[l].id.videoId){t.next=46;break}f=c.data.items[l].contentDetails.duration,b="",g=0;case 19:if(!(g<f.length)){t.next=39;break}t.t0=f[g],t.next="P"===t.t0?23:"T"===t.t0?24:"H"===t.t0?25:"M"===t.t0?28:"S"===t.t0?31:34;break;case 23:case 24:return t.abrupt("break",36);case 25:return d="0".repeat(2-b.length)+b,b="",t.abrupt("break",36);case 28:return m="0".repeat(2-b.length)+b,b="",t.abrupt("break",36);case 31:return v="0".repeat(2-b.length)+b,b="",t.abrupt("break",36);case 34:return b+=f[g],t.abrupt("break",36);case 36:g++,t.next=19;break;case 39:m=void 0===m?"00":m,v=void 0===v?"00":v,y="00"===(d=void 0===d?"00":d)?m+":"+v:d+":"+m+":"+v,"00"===d&&m<="05"&&m>="02"&&(j=r.data.items[l].snippet,_="http://www.youtube.com/watch?v="+r.data.items[l].id.videoId,k=j.title.replace(/\\|\//g,"").replace(/\s\s+/g," "),n.push({title:k,time:y,url:_,author:j.channelTitle,thumbnail:j.thumbnails.medium.url})),t.next=47;break;case 46:h++;case 47:l++,t.next=14;break;case 50:0===n.length&&n.push({message:"No Search Results Found."}),this.setState({yt_list:n});case 52:case"end":return t.stop()}}),t,this)})));return function(e){return t.apply(this,arguments)}}()},{key:"refreshPage",value:function(t){t.preventDefault(),window.location.reload()}},{key:"handlePitch",value:function(t){t.preventDefault();var e=t.target.id,i=this.state.pitch_key;"decreasePitch"===e?i=this.state.pitch_key-1:"increasePitch"===e&&(i=this.state.pitch_key+1);var s=this.getPitchValue(i);this.audioPlayer.pitch=s,this.setState({pitch_key:i}),this.setState({pitch:s})}},{key:"getPitchValue",value:function(t){var e=t>=0?parseInt(t):12+parseInt(t),i=Math.pow(2,e/12).toFixed(3);return t>=0?i:i/2}},{key:"handleTempo",value:function(t){t.preventDefault();var e=t.target.id,i=0;"decreaseTempo"===e?i=-.1:"increaseTempo"===e&&(i=.1);var s=+(Math.round(this.state.tempo+i+"e+2")+"e-2");this.audioPlayer.tempo=s,this.setState({tempo:s}),this.ref.current.playbackRate=s}},{key:"handleLatency",value:function(t){t.preventDefault();var e=t.target.id,i=0;"decreaseLatency"===e?i=-.1:"increaseLatency"===e&&(i=.1);var s=+(Math.round(this.state.latency+i+"e+2")+"e-2");this.setState({latency:s});var r=(parseFloat(this.ref.current.currentTime)+parseFloat(s))/this.state.duration*100;this.audioPlayer.seekPercent(r),this.ref.current.paused||this.play()}},{key:"toggleTJChart",value:function(t){t.preventDefault();var e=0===this.state.chartPage?1:0;e>0&&this.setState({yt_list:[],yt_title:""}),this.setState({chartPage:e})}},{key:"moveChart",value:function(t){switch(t.preventDefault(),t.target.textContent){case"next":this.setState({chartPage:this.state.chartPage+1});break;case"prev":this.setState({chartPage:this.state.chartPage-1})}}},{key:"resetChart",value:function(){this.setState({chartPage:1})}},{key:"handleSub",value:function(t){t.preventDefault(),this.setState({ios_click:!0})}},{key:"render",value:function(){var t=this;return Object(s.jsxs)("div",{className:"Karaoke",children:[Object(s.jsx)("div",{id:"header",className:"title_header alert alert-info",onClick:function(e){return t.refreshPage(e)},children:"Infinite Coin Karaoke"}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsxs)("label",{className:"btn btn-primary btn-md file-btns",htmlFor:"upload-file",style:{marginRight:"0.25em",marginBottom:"1em"},children:[Object(s.jsx)("input",{id:"upload-file",accept:"video",type:"file",style:{display:"none"},onChange:function(e){return t.handleFileChange(e)}}),"Upload from Your Device"]}),Object(s.jsxs)("button",{className:"btn btn-primary btn-md file-btns",style:{marginRight:"0.25em",marginBottom:"1em"},onClick:function(e){return t.toggleTJChart(e)},children:[this.state.chartPage>0?"Hide":"Display"," Popular Songs"]})]}),Object(s.jsx)("div",{className:"row",children:Object(s.jsxs)("form",{onSubmit:function(e){return t.searchOnYoutube(e)},className:"youtube-form",children:[Object(s.jsx)("input",{type:"text",autoFocus:"autofocus",style:{display:"none"}}),Object(s.jsx)("input",{id:"yt_title",value:this.state.yt_title,onChange:function(e){return t.handleTitle(e)},type:"text",placeholder:"Search on Youtube",className:"form-control"}),Object(s.jsx)("input",{type:"submit",className:"btn btn-danger btn-md",value:"Search"})]})}),Object(s.jsx)(b,{en_chart:this.state.en_chart,kr_chart:this.state.kr_chart,chartPage:this.state.chartPage,findOnYoutube:this.findOnYoutube,moveChart:this.moveChart,resetChart:this.resetChart}),Object(s.jsx)(k,{error:this.state.error}),Object(s.jsx)(_,{yt_list:this.state.yt_list,getMedia:this.getMedia}),Object(s.jsxs)("div",{style:{display:"loaded"===this.state.loading?"initial":"none"},children:[Object(s.jsx)("hr",{}),Object(s.jsxs)("div",{className:"row",children:[Object(s.jsx)(v,{error:this.state.error,filename:this.state.filename}),Object(s.jsxs)("div",{children:[Object(s.jsx)("video",{ref:this.ref,src:this.state.file,id:"my-video",className:"vid",onTimeUpdate:function(e){return t.handleSeek(e)},onVolumeChange:function(e){return t.handleVolume(e)},onPlay:function(e){return t.syncMusic(e)},onPause:this.pause.bind(this),controlsList:"nodownload",playsInline:!0,muted:!0,autoPlay:!0,controls:!0}),Object(s.jsxs)("div",{id:"hidden_media",style:{display:this.state.ios_click?"none":"block"},children:[Object(s.jsx)("audio",{ref:this.sub,className:"vid",src:"/silence.mp3",controls:!0,playsInline:!0,onClick:function(e){return t.handleSub(e)},style:{margin:"0"}}),Object(s.jsx)("div",{"z-index":"10",style:{width:"100px",margin:"0",backgroundColor:"red"},children:Object(s.jsx)("p",{style:{fontSize:"0.8em",color:"white"},children:"please click this button to play audio."})})]}),Object(s.jsx)("a",{className:"btn btn-secondary",href:this.state.file,download:this.state.filename+".mp4",children:"download"})]})]}),Object(s.jsx)("br",{}),Object(s.jsx)(g,{pitch_key:this.state.pitch_key,tempo:this.state.tempo,latency:this.state.latency,handlePitch:this.handlePitch,handleTempo:this.handleTempo,handleLatency:this.handleLatency})]}),Object(s.jsx)("div",{style:{width:"100%",display:"loading"===this.state.loading?"initial":"none"},children:Object(s.jsx)("img",{src:"https://media.giphy.com/media/3oEjI6SIIHBdRxXI40/giphy.gif",style:{width:"50%",marginLeft:"25%",marginRight:"25%"},alt:"loading..."})}),Object(s.jsxs)("div",{className:"row",id:"ios_tips",children:[Object(s.jsx)("hr",{}),Object(s.jsx)("p",{children:"* iOS users: please keep the video MUTED."}),Object(s.jsx)("div",{style:{display:"inline"},children:Object(s.jsxs)("p",{children:["* iOS users: please click",Object(s.jsx)("img",{src:"/playbtn.png",style:{width:"30px",margin:"3px"},alt:"playbtn"}),"to play audio."]})})]})]})}}]),i}(M.Component),N=function(t){Object(c.a)(i,t);var e=Object(h.a)(i);function i(){return Object(o.a)(this,i),e.apply(this,arguments)}return Object(u.a)(i,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("div",{children:Object(s.jsx)("div",{children:Object(s.jsx)(T,{})})}),Object(s.jsx)("hr",{})]})}}]),i}(r.Component);i(52),i(53),i(54),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(s.jsx)(N,{}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))}},[[55,1,2]]]);
//# sourceMappingURL=main.eb0863a5.chunk.js.map