{"ast":null,"code":"var tick = 1;\nvar maxTick = 65535;\nvar resolution = 4;\n\nvar inc = function () {\n  tick = tick + 1 & maxTick;\n};\n\nvar timer = setInterval(inc, 1000 / resolution | 0);\nif (timer.unref) timer.unref();\n\nmodule.exports = function (seconds) {\n  var size = resolution * (seconds || 5);\n  var buffer = [0];\n  var pointer = 1;\n  var last = tick - 1 & maxTick;\n  return function (delta) {\n    var dist = tick - last & maxTick;\n    if (dist > size) dist = size;\n    last = tick;\n\n    while (dist--) {\n      if (pointer === size) pointer = 0;\n      buffer[pointer] = buffer[pointer === 0 ? size - 1 : pointer - 1];\n      pointer++;\n    }\n\n    if (delta) buffer[pointer - 1] += delta;\n    var top = buffer[pointer - 1];\n    var btm = buffer.length < size ? 0 : buffer[pointer === size ? 0 : pointer];\n    return buffer.length < resolution ? top : (top - btm) * resolution / buffer.length;\n  };\n};","map":{"version":3,"sources":["/Users/jonkim/my-app/node_modules/speedometer/index.js"],"names":["tick","maxTick","resolution","inc","timer","setInterval","unref","module","exports","seconds","size","buffer","pointer","last","delta","dist","top","btm","length"],"mappings":"AAAA,IAAIA,IAAI,GAAG,CAAX;AACA,IAAIC,OAAO,GAAG,KAAd;AACA,IAAIC,UAAU,GAAG,CAAjB;;AACA,IAAIC,GAAG,GAAG,YAAY;AACpBH,EAAAA,IAAI,GAAIA,IAAI,GAAG,CAAR,GAAaC,OAApB;AACD,CAFD;;AAIA,IAAIG,KAAK,GAAGC,WAAW,CAACF,GAAD,EAAO,OAAOD,UAAR,GAAsB,CAA5B,CAAvB;AACA,IAAIE,KAAK,CAACE,KAAV,EAAiBF,KAAK,CAACE,KAAN;;AAEjBC,MAAM,CAACC,OAAP,GAAiB,UAAUC,OAAV,EAAmB;AAClC,MAAIC,IAAI,GAAGR,UAAU,IAAIO,OAAO,IAAI,CAAf,CAArB;AACA,MAAIE,MAAM,GAAG,CAAC,CAAD,CAAb;AACA,MAAIC,OAAO,GAAG,CAAd;AACA,MAAIC,IAAI,GAAIb,IAAI,GAAG,CAAR,GAAaC,OAAxB;AAEA,SAAO,UAAUa,KAAV,EAAiB;AACtB,QAAIC,IAAI,GAAIf,IAAI,GAAGa,IAAR,GAAgBZ,OAA3B;AACA,QAAIc,IAAI,GAAGL,IAAX,EAAiBK,IAAI,GAAGL,IAAP;AACjBG,IAAAA,IAAI,GAAGb,IAAP;;AAEA,WAAOe,IAAI,EAAX,EAAe;AACb,UAAIH,OAAO,KAAKF,IAAhB,EAAsBE,OAAO,GAAG,CAAV;AACtBD,MAAAA,MAAM,CAACC,OAAD,CAAN,GAAkBD,MAAM,CAACC,OAAO,KAAK,CAAZ,GAAgBF,IAAI,GAAG,CAAvB,GAA2BE,OAAO,GAAG,CAAtC,CAAxB;AACAA,MAAAA,OAAO;AACR;;AAED,QAAIE,KAAJ,EAAWH,MAAM,CAACC,OAAO,GAAG,CAAX,CAAN,IAAuBE,KAAvB;AAEX,QAAIE,GAAG,GAAGL,MAAM,CAACC,OAAO,GAAG,CAAX,CAAhB;AACA,QAAIK,GAAG,GAAGN,MAAM,CAACO,MAAP,GAAgBR,IAAhB,GAAuB,CAAvB,GAA2BC,MAAM,CAACC,OAAO,KAAKF,IAAZ,GAAmB,CAAnB,GAAuBE,OAAxB,CAA3C;AAEA,WAAOD,MAAM,CAACO,MAAP,GAAgBhB,UAAhB,GAA6Bc,GAA7B,GAAmC,CAACA,GAAG,GAAGC,GAAP,IAAcf,UAAd,GAA2BS,MAAM,CAACO,MAA5E;AACD,GAjBD;AAkBD,CAxBD","sourcesContent":["var tick = 1\nvar maxTick = 65535\nvar resolution = 4\nvar inc = function () {\n  tick = (tick + 1) & maxTick\n}\n\nvar timer = setInterval(inc, (1000 / resolution) | 0)\nif (timer.unref) timer.unref()\n\nmodule.exports = function (seconds) {\n  var size = resolution * (seconds || 5)\n  var buffer = [0]\n  var pointer = 1\n  var last = (tick - 1) & maxTick\n\n  return function (delta) {\n    var dist = (tick - last) & maxTick\n    if (dist > size) dist = size\n    last = tick\n\n    while (dist--) {\n      if (pointer === size) pointer = 0\n      buffer[pointer] = buffer[pointer === 0 ? size - 1 : pointer - 1]\n      pointer++\n    }\n\n    if (delta) buffer[pointer - 1] += delta\n\n    var top = buffer[pointer - 1]\n    var btm = buffer.length < size ? 0 : buffer[pointer === size ? 0 : pointer]\n\n    return buffer.length < resolution ? top : (top - btm) * resolution / buffer.length\n  }\n}\n"]},"metadata":{},"sourceType":"script"}