{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/jonkim/my-app/src/App.js\";\nimport FilenameLabel from './components/FilenameLabel.jsx';\nimport TrackControls from './components/TrackControls.jsx';\nimport ErrorAlert from './components/ErrorAlert.jsx';\n\nconst EventEmitter = require('events').EventEmitter;\n\nconst React = require('react');\n\nconst AudioPlayer = require('./lib/AudioPlayer');\n\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      action: 'stop',\n      duration: undefined,\n      error: undefined,\n      filename: undefined,\n      pitch: 1.0,\n      simpleFilter: undefined,\n      status: [],\n      t: 0,\n      tempo: 1.0\n    };\n    this.emitter = new EventEmitter();\n    this.emitter.on('state', state => this.setState(state));\n    this.emitter.on('status', status => {\n      if (status === 'Done!') {\n        this.setState({\n          status: []\n        });\n      } else {\n        this.setState({\n          status: this.state.status.concat(status)\n        });\n      }\n    });\n    this.emitter.on('stop', () => this.stop());\n    this.audioPlayer = new AudioPlayer({\n      emitter: this.emitter,\n      pitch: this.state.pitch,\n      tempo: this.state.tempo\n    });\n    this.inputRef = React.createRef();\n    this.file_location = \"\";\n  }\n\n  play() {\n    if (this.state.action !== 'play') {\n      this.audioPlayer.play();\n      this.setState({\n        action: 'play'\n      });\n    }\n  }\n\n  pause() {\n    if (this.state.action === 'play') {\n      this.audioPlayer.pause();\n      this.setState({\n        action: 'pause'\n      });\n    }\n  }\n\n  stop() {\n    this.pause();\n    this.audioPlayer.seekPercent(0);\n    this.setState({\n      action: 'stop',\n      t: 0\n    });\n  }\n\n  handleFileChange(e) {\n    if (e.target.files.length > 0) {\n      this.stop();\n      this.emitter.emit('status', 'Reading file...');\n      this.emitter.emit('state', {\n        error: undefined,\n        filename: undefined\n      }); // http://stackoverflow.com/q/4851595/786644\n\n      const filename = e.target.value.replace('C:\\\\fakepath\\\\', '');\n      this.emitter.emit('state', {\n        filename\n      });\n      const file = e.target.files[0];\n      this.file_location = URL.createObjectURL(file);\n      const reader = new FileReader();\n      reader.readAsArrayBuffer(file);\n\n      reader.onload = async event => {\n        this.emitter.emit('status', 'Playing file...');\n        let buffer;\n\n        try {\n          buffer = await this.audioPlayer.decodeAudioData(event.target.result);\n        } catch (err) {\n          this.emitter.emit('state', {\n            error: {\n              message: err.message,\n              type: 'Decoding error'\n            }\n          });\n          return;\n        }\n\n        this.file_location = filename;\n        this.audioPlayer.setBuffer(buffer);\n        this.play();\n      };\n    }\n  } //https://prgomez.com/why-do-re-mi/\n\n\n  handlePitchChange(e) {\n    var num = 0;\n    var s_var = e.target.value >= 0 ? parseInt(e.target.value) : 12 + parseInt(e.target.value);\n\n    switch (s_var) {\n      case 0:\n        num = 1;\n        break;\n\n      case 1:\n        num = 1.059;\n        break;\n\n      case 2:\n        num = 1.122;\n        break;\n\n      case 3:\n        num = 1.189;\n        break;\n\n      case 4:\n        num = 1.26;\n        break;\n\n      case 5:\n        num = 1.335;\n        break;\n\n      case 6:\n        num = 1.414;\n        break;\n\n      case 7:\n        num = 1.498;\n        break;\n\n      case 8:\n        num = 1.587;\n        break;\n\n      case 9:\n        num = 1.682;\n        break;\n\n      case 10:\n        num = 1.782;\n        break;\n\n      case 11:\n        num = 1.888;\n        break;\n\n      case 12:\n        num = 2;\n        break;\n\n      default:\n        num = 1;\n        break;\n    }\n\n    const pitch = e.target.value >= 0 ? num : num / 2;\n    this.audioPlayer.pitch = pitch;\n    this.setState({\n      pitch\n    });\n  }\n\n  handlePitchChange1(e) {\n    const pitch = e.target.value;\n    this.audioPlayer.pitch = pitch;\n    this.setState({\n      pitch\n    });\n  }\n\n  handleTempoChange(e) {\n    const tempo = e.target.value;\n    this.audioPlayer.tempo = tempo;\n    this.setState({\n      tempo\n    });\n  }\n\n  decreaseTempo(e) {\n    if (this.state.tempo >= 0.5 && this.state.tempo <= 2) {\n      const tempo = this.state.tempo - 0.5;\n      this.audioPlayer.tempo = tempo;\n      this.setState({\n        tempo\n      });\n    }\n  }\n\n  increaseTempo(e) {\n    console.log(this.state.tempo);\n\n    if (this.state.tempo >= 0.5 && this.state.tempo < 2) {\n      const tempo = this.state.tempo + 0.5;\n      this.audioPlayer.tempo = tempo;\n      this.setState({\n        tempo\n      });\n    }\n  }\n\n  handleSeek(e) {\n    const percent = parseFloat(e.target.value);\n    this.audioPlayer.seekPercent(percent);\n    this.play();\n  }\n\n  percentDone() {\n    if (!this.state.duration) {\n      return 0;\n    }\n\n    return this.state.t / this.state.duration * 100;\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"App\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: '1em'\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          className: \"btn btn-primary btn-lg\",\n          htmlFor: \"sas-file\",\n          style: {\n            marginRight: '0.25em'\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            id: \"sas-file\",\n            accept: \"audio\",\n            type: \"file\",\n            style: {\n              display: 'none'\n            },\n            onChange: e => this.handleFileChange(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 25\n          }, this), \"Select MP3\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(FilenameLabel, {\n          error: this.state.error,\n          filename: this.state.filename\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 229,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ErrorAlert, {\n        error: this.state.error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-5 col-sm-3 col-lg-2\",\n          style: {\n            paddingTop: '6px'\n          },\n          children: /*#__PURE__*/_jsxDEV(TrackControls, {\n            action: this.state.action,\n            error: this.state.error,\n            filename: this.state.filename,\n            onPlay: () => this.play(),\n            onPause: () => this.pause(),\n            onStop: () => this.stop()\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 236,\n            columnNumber: 22\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-7 col-sm-9 col-lg-10\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"range\",\n            min: \"0\",\n            max: \"100\",\n            step: \"0.05\",\n            value: this.percentDone(),\n            onChange: e => this.handleSeek(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-5 col-sm-3 col-lg-2\",\n          style: {\n            paddingTop: '7px'\n          },\n          children: [\"Pitch (\", this.state.pitch, \"x)\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 259,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-7 col-sm-9 col-lg-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"number\",\n            min: \"-12\",\n            max: \"12\",\n            step: \"1\",\n            defaultValue: \"0\",\n            onChange: e => this.handlePitchChange(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 263,\n            columnNumber: 25\n          }, this), \"key\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 258,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-7 col-sm-9 col-lg-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: e => this.decreaseTempo(e),\n            children: \" slow \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 279,\n            columnNumber: 22\n          }, this), \"Tempo (\", this.state.tempo, \"x)\", /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            onClick: e => this.increaseTempo(e),\n            children: \" fast \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 281,\n            columnNumber: 22\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-xs-7 col-sm-9 col-lg-10\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-control\",\n            type: \"range\",\n            min: \"0.05\",\n            max: \"2\",\n            step: \"0.05\",\n            defaultValue: this.state.tempo,\n            onChange: e => this.handleTempoChange(e)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 277,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 6\n    }, this);\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/jonkim/my-app/src/App.js"],"names":["FilenameLabel","TrackControls","ErrorAlert","EventEmitter","require","React","AudioPlayer","App","Component","constructor","props","state","action","duration","undefined","error","filename","pitch","simpleFilter","status","t","tempo","emitter","on","setState","concat","stop","audioPlayer","inputRef","createRef","file_location","play","pause","seekPercent","handleFileChange","e","target","files","length","emit","value","replace","file","URL","createObjectURL","reader","FileReader","readAsArrayBuffer","onload","event","buffer","decodeAudioData","result","err","message","type","setBuffer","handlePitchChange","num","s_var","parseInt","handlePitchChange1","handleTempoChange","decreaseTempo","increaseTempo","console","log","handleSeek","percent","parseFloat","percentDone","render","marginBottom","marginRight","display","paddingTop"],"mappings":"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","sourcesContent":["import FilenameLabel from'./components/FilenameLabel.jsx';\nimport TrackControls from'./components/TrackControls.jsx';\nimport ErrorAlert from'./components/ErrorAlert.jsx';\n\nconst EventEmitter = require('events').EventEmitter;\nconst React = require('react');\nconst AudioPlayer = require('./lib/AudioPlayer');\n\nclass App extends React.Component {\n\n\tconstructor(props) {\n        super(props);\n\n        this.state = {\n            action: 'stop',\n            duration: undefined,\n            error: undefined,\n            filename: undefined,\n            pitch: 1.0,\n            simpleFilter: undefined,\n            status: [],\n            t: 0,\n            tempo: 1.0,\n        };\n\n        this.emitter = new EventEmitter();\n        this.emitter.on('state', state => this.setState(state));\n        this.emitter.on('status', status => {\n            if (status === 'Done!') {\n                this.setState({status: []});\n            } else {\n                this.setState({status: this.state.status.concat(status)});\n            }\n        });\n        this.emitter.on('stop', () => this.stop());\n\n        this.audioPlayer = new AudioPlayer({\n            emitter: this.emitter,\n            pitch: this.state.pitch,\n            tempo: this.state.tempo,\n        });\n\n        this.inputRef = React.createRef();\n        this.file_location = \"\";\n    }\n\n    play() {\n        if (this.state.action !== 'play') {\n            this.audioPlayer.play();\n            this.setState({action: 'play'});\n        }\n    }\n\n    pause() {\n        if (this.state.action === 'play') {\n            this.audioPlayer.pause();\n            this.setState({action: 'pause'});\n        }\n    }\n\n    stop() {\n        this.pause();\n        this.audioPlayer.seekPercent(0);\n        this.setState({action: 'stop', t: 0});\n    }\n\n    handleFileChange(e) {\n        if (e.target.files.length > 0) {\n            this.stop();\n\n            this.emitter.emit('status', 'Reading file...');\n            this.emitter.emit('state', {\n                error: undefined,\n                filename: undefined,\n            });\n\n\n\n\n            // http://stackoverflow.com/q/4851595/786644\n            const filename = e.target.value.replace('C:\\\\fakepath\\\\', '');\n            this.emitter.emit('state', {filename});\n\n            const file = e.target.files[0];\n            this.file_location = URL.createObjectURL(file);\n\n            const reader = new FileReader();\n            reader.readAsArrayBuffer(file);\n            reader.onload = async event => {\n                this.emitter.emit('status', 'Playing file...');\n\n                let buffer;\n                try {\n                    buffer = await this.audioPlayer.decodeAudioData(event.target.result);\n                } catch (err) {\n                    this.emitter.emit('state', {\n                        error: {\n                            message: err.message,\n                            type: 'Decoding error',\n                        },\n                    });\n                    return;\n                }\n\n                this.file_location = filename;\n\n                this.audioPlayer.setBuffer(buffer);\n                this.play();\n            };\n        }\n    }\n\n    //https://prgomez.com/why-do-re-mi/\n\n    handlePitchChange(e) {\n    \tvar num = 0;\n    \tvar s_var = (e.target.value>=0)?(parseInt(e.target.value)):(12+parseInt(e.target.value));\n    \tswitch(s_var){\n    \t\tcase 0 : \n    \t\t\tnum = 1;\n    \t\t\tbreak;\n    \t\tcase 1 : \n    \t\t\tnum = 1.059;\n    \t\t\tbreak;\n    \t\tcase 2 : \n    \t\t\tnum = 1.122;\n    \t\t\tbreak;\n    \t\tcase 3 : \n    \t\t\tnum = 1.189;\n    \t\t\tbreak;\n    \t\tcase 4 : \n    \t\t\tnum = 1.26;\n    \t\t\tbreak;\n    \t\tcase 5 : \n    \t\t\tnum = 1.335;\n    \t\t\tbreak;\n    \t\tcase 6 : \n    \t\t\tnum = 1.414;\n    \t\t\tbreak;\n    \t\tcase 7 : \n    \t\t\tnum = 1.498;\n    \t\t\tbreak;\n    \t\tcase 8 : \n    \t\t\tnum = 1.587;\n    \t\t\tbreak;\n    \t\tcase 9 : \n    \t\t\tnum = 1.682;\n    \t\t\tbreak;\n    \t\tcase 10 : \n    \t\t\tnum = 1.782;\n    \t\t\tbreak;\n    \t\tcase 11 : \n    \t\t\tnum = 1.888;\n    \t\t\tbreak;\n    \t\tcase 12 : \n    \t\t\tnum = 2;\n    \t\t\tbreak;\n    \t\tdefault : \n    \t\t\tnum = 1;\n    \t\t\tbreak;\n    \t}\n        const pitch = (e.target.value>=0)?(num):(num/2);\n        this.audioPlayer.pitch = pitch;\n        this.setState({pitch});\n    }\n    handlePitchChange1(e) {\n        const pitch = e.target.value;\n        this.audioPlayer.pitch = pitch;\n        this.setState({pitch});\n    }\n\n    handleTempoChange(e) {\n        const tempo = e.target.value;\n        this.audioPlayer.tempo = tempo;\n        this.setState({tempo});\n    }\n\n    decreaseTempo(e) {\n    \tif(this.state.tempo >= 0.5 && this.state.tempo <= 2){\n    \t\tconst tempo = this.state.tempo-0.5;\n\t        this.audioPlayer.tempo = tempo;\n\t        this.setState({tempo});\n    \t}\n    }\n\n    increaseTempo(e) {\n    \tconsole.log(this.state.tempo);\n        if(this.state.tempo >= 0.5 && this.state.tempo < 2){\n    \t\tconst tempo = this.state.tempo+0.5;\n\t        this.audioPlayer.tempo = tempo;\n\t        this.setState({tempo});\n    \t}\n    }\n\n    handleSeek(e) {\n        const percent = parseFloat(e.target.value);\n        this.audioPlayer.seekPercent(percent);\n        this.play();\n    }\n\n    percentDone() {\n        if (!this.state.duration) {\n            return 0;\n        }\n\n        return this.state.t / this.state.duration * 100;\n    }\n\n\trender (){\n\t  \treturn (\n\n\t  \t\t<div className=\"App\">\n\n\t\t      <div style={{marginBottom: '1em'}}>\n                    <label\n                        className=\"btn btn-primary btn-lg\"\n                        htmlFor=\"sas-file\"\n                        style={{marginRight: '0.25em'}}\n                    >\n                        <input\n                            id=\"sas-file\"\n                            accept=\"audio\"\n                            type=\"file\"\n                            style={{display: 'none'}}\n                            onChange={e => this.handleFileChange(e)}\n                        />\n                        Select MP3\n                    </label>\n                    <FilenameLabel error={this.state.error} filename={this.state.filename} />\n                </div>\n\n                <ErrorAlert error={this.state.error} />\n\n                <div className=\"row\">\n                    <div className=\"col-xs-5 col-sm-3 col-lg-2\" style={{paddingTop: '6px'}}>\n                    \t<TrackControls\n                            action={this.state.action}\n                            error={this.state.error}\n                            filename={this.state.filename}\n                            onPlay={() => this.play()}\n                            onPause={() => this.pause()}\n                            onStop={() => this.stop()}\n                        />\n                    </div>\n                    <div className=\"col-xs-7 col-sm-9 col-lg-10\">\n                        <input\n                            className=\"form-control\"\n                            type=\"range\"\n                            min=\"0\"\n                            max=\"100\"\n                            step=\"0.05\"\n                            value={this.percentDone()}\n                            onChange={e => this.handleSeek(e)}\n                        />\n                    </div>\n                </div>\n\n                <div className=\"row\">\n                    <div className=\"col-xs-5 col-sm-3 col-lg-2\" style={{paddingTop: '7px'}}>\n                        Pitch ({this.state.pitch}x)\n                    </div>\n                    <div className=\"col-xs-7 col-sm-9 col-lg-10\">\n                        <input\n                            className=\"form-control\"\n                            type=\"number\"\n                            min=\"-12\"\n                            max=\"12\"\n                            step=\"1\"\n                            defaultValue=\"0\"\n                            onChange={e => this.handlePitchChange(e)}\n                        />\n                        key\n                    </div>\n                </div>\n\n\n                <div className=\"row\">\n                    <div className=\"col-xs-7 col-sm-9 col-lg-10\">\n                    \t<button type=\"button\" onClick={e => this.decreaseTempo(e)}> slow </button>\n\t                        Tempo ({this.state.tempo}x)\n                    \t<button type=\"button\" onClick={e => this.increaseTempo(e)}> fast </button>\n                    </div>\n                    \n                   \n                    \n                    <div className=\"col-xs-7 col-sm-9 col-lg-10\">\n                        <input\n                            className=\"form-control\"\n                            type=\"range\"\n                            min=\"0.05\"\n                            max=\"2\"\n                            step=\"0.05\"\n                            defaultValue={this.state.tempo}\n                            onChange={e => this.handleTempoChange(e)}\n                        />\n                    </div>\n                </div>\n\t\t    </div>\n\n\t    )\n\t}\n\n}\n\nexport default App;\n"]},"metadata":{},"sourceType":"module"}