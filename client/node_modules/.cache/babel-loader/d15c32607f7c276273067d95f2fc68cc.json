{"ast":null,"code":"'use strict';\n\nvar exec = require('child_process').exec;\n\nvar isWindows = process.platform === 'win32';\nvar commandMaker = isWindows ? require('./make-command-win') : require('./make-command-unix');\n\nfunction fixResult(results, dir) {\n  return results.map(function (path) {\n    var index = path.indexOf(dir);\n    return '.\\\\' + path.substr(index);\n  });\n}\n\nmodule.exports = function (callback, argv) {\n  var command = commandMaker(argv);\n  exec(command, function (error, stdout, stderr) {\n    var results = stdout.split('\\n').filter(function (str) {\n      return str !== '';\n    });\n\n    if (error !== null) {\n      callback({\n        error: stderr\n      });\n      return;\n    }\n\n    if (!argv.isAbsolutePath && isWindows) {\n      results = fixResult(results, argv.dir);\n    }\n\n    callback(results);\n  });\n};","map":{"version":3,"sources":["/Users/jonkim/Karaoke/client/node_modules/list-files/index.js"],"names":["exec","require","isWindows","process","platform","commandMaker","fixResult","results","dir","map","path","index","indexOf","substr","module","exports","callback","argv","command","error","stdout","stderr","split","filter","str","isAbsolutePath"],"mappings":"AAAA;;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,eAAD,CAAP,CAAyBD,IAApC;;AACA,IAAIE,SAAS,GAAGC,OAAO,CAACC,QAAR,KAAqB,OAArC;AACA,IAAIC,YAAY,GAAGH,SAAS,GACtBD,OAAO,CAAC,oBAAD,CADe,GAEtBA,OAAO,CAAC,qBAAD,CAFb;;AAIA,SAASK,SAAT,CAAoBC,OAApB,EAA6BC,GAA7B,EAAkC;AAC9B,SAAOD,OAAO,CAACE,GAAR,CAAY,UAAUC,IAAV,EAAgB;AAC/B,QAAIC,KAAK,GAAGD,IAAI,CAACE,OAAL,CAAaJ,GAAb,CAAZ;AACA,WAAO,QAAQE,IAAI,CAACG,MAAL,CAAYF,KAAZ,CAAf;AACH,GAHM,CAAP;AAIH;;AAEDG,MAAM,CAACC,OAAP,GAAiB,UAAUC,QAAV,EAAoBC,IAApB,EAA0B;AACvC,MAAIC,OAAO,GAAGb,YAAY,CAACY,IAAD,CAA1B;AAEAjB,EAAAA,IAAI,CAACkB,OAAD,EACA,UAASC,KAAT,EAAgBC,MAAhB,EAAwBC,MAAxB,EAAgC;AAC5B,QAAId,OAAO,GAAGa,MAAM,CAACE,KAAP,CAAa,IAAb,EAAmBC,MAAnB,CAA0B,UAASC,GAAT,EAAc;AAClD,aAAOA,GAAG,KAAK,EAAf;AACH,KAFa,CAAd;;AAGA,QAAIL,KAAK,KAAK,IAAd,EAAoB;AAChBH,MAAAA,QAAQ,CAAC;AACLG,QAAAA,KAAK,EAAEE;AADF,OAAD,CAAR;AAGA;AACH;;AACD,QAAI,CAACJ,IAAI,CAACQ,cAAN,IAAwBvB,SAA5B,EAAuC;AACnCK,MAAAA,OAAO,GAAGD,SAAS,CAACC,OAAD,EAAUU,IAAI,CAACT,GAAf,CAAnB;AACH;;AACDQ,IAAAA,QAAQ,CAACT,OAAD,CAAR;AACH,GAfD,CAAJ;AAgBH,CAnBD","sourcesContent":["'use strict';\n\nvar exec = require('child_process').exec;\nvar isWindows = process.platform === 'win32';\nvar commandMaker = isWindows\n    ? require('./make-command-win')\n    : require('./make-command-unix');\n\nfunction fixResult (results, dir) {\n    return results.map(function (path) {\n        var index = path.indexOf(dir);\n        return '.\\\\' + path.substr(index);\n    });\n}\n\nmodule.exports = function (callback, argv) {\n    var command = commandMaker(argv);\n\n    exec(command,\n        function(error, stdout, stderr) {\n            var results = stdout.split('\\n').filter(function(str) {\n                return str !== '';\n            });\n            if (error !== null) {\n                callback({\n                    error: stderr\n                });\n                return;\n            }\n            if (!argv.isAbsolutePath && isWindows) {\n                results = fixResult(results, argv.dir)\n            }\n            callback(results);\n        });\n};\n"]},"metadata":{},"sourceType":"script"}